<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: 2.RGB-LED-Chaser.ino</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script>
<script type="text/javascript" async="async" src="/MathJax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Control Surface
   <span id="projectnumber">&#160;<code><a href="/Control-Surface/">1.2.0</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">2.RGB-LED-Chaser.ino</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="autotoc_md225"></a>
2.RGB-LED-Chaser</h1>
<p>This is an example of the ShiftRegisterOut class of the Control Surface library. It creates light effects using three 8-bit shift registers and some RGB LEDs.</p>
<dl class="section user"><dt>Boards:</dt><dd>AVR, AVR USB, Nano Every, Nano 33, Due, Teensy 3.x, ESP8266, ESP32</dd></dl>
<h2><a class="anchor" id="autotoc_md226"></a>
Connections</h2>
<p>Connect three daisy-chained shift registers to the SPI pins. <br  />
 Connect 8 RGB LEDs (+ current limiting resistors) to the outputs of the shift registers.</p>
<div class="fragment"><div class="line">SCK   &gt;───────────┬──────────────────────┬──────────────────────┐</div>
<div class="line">          ┏━━━━━━━┷━━━━━━━┓      ┏━━━━━━━┷━━━━━━━┓      ┏━━━━━━━┷━━━━━━━┓</div>
<div class="line">          ┃     SH_CP     ┃      ┃     SH_CP     ┃      ┃     SH_CP     ┃</div>
<div class="line">MOSI  &gt;───┨ DS        Q7S ┠──────┨ DS        Q7S ┠──────┨ DS        Q7S ┃</div>
<div class="line">          ┃     ST_CP     ┃      ┃     ST_CP     ┃      ┃     ST_CP     ┃</div>
<div class="line">          ┗━━━━━━━┯━━━━━━━┛      ┗━━━━━━━┯━━━━━━━┛      ┗━━━━━━━┯━━━━━━━┛</div>
<div class="line">SS    &gt;───────────┴──────────────────────┴──────────────────────┘</div>
</div><!-- fragment --><p>Remember to connect the enable pin of the shift register to ground and the master reset pin to Vcc in order to enable it. <br  />
</p>
<p>The order of the colors doesn't matter. You can change them in software using the <code>ShiftRegisterOutRGB::redBit</code>, <code>ShiftRegisterOutRGB::greenBit</code> and <code>ShiftRegisterOutRGB::blueBit</code> constants.</p>
<p>If you wired the LEDs as RGB (red first, then green and then blue), the red bit is 0, the green bit is 1 and the blue bit is 2. <br  />
 If you wired the LEDs as BGR (blue first, then green and then red), the red bit is 2, the green bit is 1 and the blue bit is 0. <br  />
 Other combinations are possible as well.</p>
<h2><a class="anchor" id="autotoc_md227"></a>
Behavior</h2>
<p>This example will turn on all red LEDs one by one, then turn them off one by one, next, it will turn on and off all green LEDs in the same manner, and finally the same for the blue LEDs. This is repeated indefinitely.</p>
<h2><a class="anchor" id="autotoc_md228"></a>
Demo</h2>
<p> 
<iframe width="560" height="315"
src="https://www.youtube.com/embed/7ywcTTdnseU?loop=1" frameborder="0"
allow="accelerometer; autoplay; encrypted-media; gyroscope;
picture-in-picture" allowfullscreen></iframe>
</p>
<p>Written by Pieter P, 2018-07-13 <br  />
 <a href="https://github.com/tttapa/Arduino-Helpers">https://github.com/tttapa/Arduino-Helpers</a></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dc/de6/Arduino__Helpers_8h.html">Arduino_Helpers.h</a>&gt;</span> <span class="comment">// Include the Arduino Helpers library.</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d7/d88/SPIShiftRegisterOut_8hpp.html">AH/Hardware/ExtendedInputOutput/SPIShiftRegisterOut.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>ExtIO; <span class="comment">// Bring the ExtIO pin functions into your sketch</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// If you wired your LEDs as RGB</span></div>
<div class="line"><span class="keyword">const</span> uint8_t ShiftRegisterOutRGB::redBit = 0;</div>
<div class="line"><span class="keyword">const</span> uint8_t ShiftRegisterOutRGB::greenBit = 1;</div>
<div class="line"><span class="keyword">const</span> uint8_t ShiftRegisterOutRGB::blueBit = 2;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If you wired your LEDs as BGR</span></div>
<div class="line"><span class="comment">// const uint8_t ShiftRegisterOutRGB::redBit   = 2;</span></div>
<div class="line"><span class="comment">// const uint8_t ShiftRegisterOutRGB::greenBit = 1;</span></div>
<div class="line"><span class="comment">// const uint8_t ShiftRegisterOutRGB::blueBit  = 0;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a new shift register output connected to pins 11, 13 and 10,</span></div>
<div class="line"><span class="comment">// shift the data out with the most significant bit first.</span></div>
<div class="line"><span class="comment">// There are 24 (= 3×8) outputs in total.</span></div>
<div class="line">SPIShiftRegisterOut&lt;24&gt; sreg = {SS, MSBFIRST};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Initialize the shift registers</span></div>
<div class="line">  sreg.begin();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> delayTime = 50;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <span class="comment">// Red on</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a name="a0"></a><a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.red(i), <a name="a1"></a><a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#a1a23a9c76c68c1dab0655f95291a75af">HIGH</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Red off</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.red(i), <a name="a2"></a><a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#ad294464395ca0655395db09e768fdc1d">LOW</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Green on</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.green(i), <a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#a1a23a9c76c68c1dab0655f95291a75af">HIGH</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Green off</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.green(i), <a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#ad294464395ca0655395db09e768fdc1d">LOW</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Blue on</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.blue(i), <a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#a1a23a9c76c68c1dab0655f95291a75af">HIGH</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Blue off</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 8; i++) {</div>
<div class="line">    <a class="code" href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">digitalWrite</a>(sreg.blue(i), <a class="code" href="../../dd/ddf/ExtendedInputOutput_8hpp.html#ad294464395ca0655395db09e768fdc1d">LOW</a>);</div>
<div class="line">    delay(delayTime);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="aExtendedInputOutput_8hpp_html_ad294464395ca0655395db09e768fdc1d"><div class="ttname"><a href="../../dd/ddf/ExtendedInputOutput_8hpp.html#ad294464395ca0655395db09e768fdc1d">LOW</a></div><div class="ttdeci">const PinStatus_t LOW</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddf/ExtendedInputOutput_8hpp_source.html#l00057">ExtendedInputOutput.hpp:57</a></div></div>
<div class="ttc" id="aSPIShiftRegisterOut_8hpp_html"><div class="ttname"><a href="../../d7/d88/SPIShiftRegisterOut_8hpp.html">SPIShiftRegisterOut.hpp</a></div></div>
<div class="ttc" id="anamespaceAH_1_1ExtIO_html_aff89e0a727f5b97e0618b8f2f65b3356"><div class="ttname"><a href="../../d7/d22/namespaceAH_1_1ExtIO.html#aff89e0a727f5b97e0618b8f2f65b3356">AH::ExtIO::digitalWrite</a></div><div class="ttdeci">void digitalWrite(pin_t pin, PinStatus_t val)</div><div class="ttdoc">An ExtIO version of the Arduino function.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d3c/ExtendedInputOutput_8cpp_source.html#l00048">ExtendedInputOutput.cpp:48</a></div></div>
<div class="ttc" id="aExtendedInputOutput_8hpp_html_a1a23a9c76c68c1dab0655f95291a75af"><div class="ttname"><a href="../../dd/ddf/ExtendedInputOutput_8hpp.html#a1a23a9c76c68c1dab0655f95291a75af">HIGH</a></div><div class="ttdeci">const PinStatus_t HIGH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddf/ExtendedInputOutput_8hpp_source.html#l00056">ExtendedInputOutput.hpp:56</a></div></div>
<div class="ttc" id="aArduino__Helpers_8h_html"><div class="ttname"><a href="../../dc/de6/Arduino__Helpers_8h.html">Arduino_Helpers.h</a></div><div class="ttdoc">Dummy header file for Arduino builder.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19
</small></address>
</body>
</html>
