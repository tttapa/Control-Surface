<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: AH::FilteredAnalog&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" async="async" src="/MathJax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Control Surface
   <span id="projectnumber">&#160;<code><a href="/Control-Surface/">1.1.0</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dc/d69/namespaceAH.html">AH</a></li><li class="navelem"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">FilteredAnalog</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../df/da0/classAH_1_1FilteredAnalog-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AH::FilteredAnalog&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt; Class Template Reference<div class="ingroups"><a class="el" href="../../d7/d07/group__AH__group.html">Arduino Helpers</a> &raquo; <a class="el" href="../../d8/d53/group__AH__HardwareUtils.html">Hardware Utilities</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A class that reads and filters an analog input.  
 <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AH::FilteredAnalog&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/dae/classAH_1_1FilteredAnalog__coll__graph.svg" width="476" height="588"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa080a585e0ed40e33953d9ff07461c34"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a> = AnalogType(*)(AnalogType)</td></tr>
<tr class="memdesc:aa080a585e0ed40e33953d9ff07461c34"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function pointer to a mapping function to map analog values.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">More...</a><br /></td></tr>
<tr class="separator:aa080a585e0ed40e33953d9ff07461c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5b99fdade6a71bed01f34b87eeebed3f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a5b99fdade6a71bed01f34b87eeebed3f">FilteredAnalog</a> (<a class="el" href="../../dc/d69/namespaceAH.html#a5674c973801a7f18514a073503f6f479">pin_t</a> <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ae5e31a96ef99c47aa1f534765617d289">analogPin</a>)</td></tr>
<tr class="memdesc:a5b99fdade6a71bed01f34b87eeebed3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html" title="A class that reads and filters an analog input.">FilteredAnalog</a> object.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a5b99fdade6a71bed01f34b87eeebed3f">More...</a><br /></td></tr>
<tr class="separator:a5b99fdade6a71bed01f34b87eeebed3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7af1da1c4c739d9d98c6a5e83267597"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ad7af1da1c4c739d9d98c6a5e83267597">map</a> (<a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a> fn)</td></tr>
<tr class="memdesc:ad7af1da1c4c739d9d98c6a5e83267597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify a mapping function that is applied to the raw analog value before filtering.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ad7af1da1c4c739d9d98c6a5e83267597">More...</a><br /></td></tr>
<tr class="separator:ad7af1da1c4c739d9d98c6a5e83267597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace25be3f306a43da753cff64c1a9cb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aace25be3f306a43da753cff64c1a9cb5">invert</a> ()</td></tr>
<tr class="memdesc:aace25be3f306a43da753cff64c1a9cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invert the analog value.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aace25be3f306a43da753cff64c1a9cb5">More...</a><br /></td></tr>
<tr class="separator:aace25be3f306a43da753cff64c1a9cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2564481d668e99c6025c6b5c79585b21"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a2564481d668e99c6025c6b5c79585b21">update</a> ()</td></tr>
<tr class="memdesc:a2564481d668e99c6025c6b5c79585b21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the analog input value, apply the mapping function, and update the average.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a2564481d668e99c6025c6b5c79585b21">More...</a><br /></td></tr>
<tr class="separator:a2564481d668e99c6025c6b5c79585b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b66ab797e655a2d2fbb94c4f9640e00"><td class="memItemLeft" align="right" valign="top">AnalogType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a5b66ab797e655a2d2fbb94c4f9640e00">getValue</a> () const</td></tr>
<tr class="memdesc:a5b66ab797e655a2d2fbb94c4f9640e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the filtered value of the analog input with the mapping function applied.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a5b66ab797e655a2d2fbb94c4f9640e00">More...</a><br /></td></tr>
<tr class="separator:a5b66ab797e655a2d2fbb94c4f9640e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecfa54ca201ac7209452eda588ecb48"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a8ecfa54ca201ac7209452eda588ecb48">getFloatValue</a> () const</td></tr>
<tr class="memdesc:a8ecfa54ca201ac7209452eda588ecb48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the filtered value of the analog input with the mapping function applied as a floating point number from 0.0 to 1.0.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a8ecfa54ca201ac7209452eda588ecb48">More...</a><br /></td></tr>
<tr class="separator:a8ecfa54ca201ac7209452eda588ecb48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ba283d3040ef53d86d0bc2a3f0b1a2"><td class="memItemLeft" align="right" valign="top">AnalogType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a93ba283d3040ef53d86d0bc2a3f0b1a2">getRawValue</a> () const</td></tr>
<tr class="memdesc:a93ba283d3040ef53d86d0bc2a3f0b1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the raw value of the analog input any filtering or mapping applied, but with its bit depth increased by <code>Upsample</code>.  <a href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a93ba283d3040ef53d86d0bc2a3f0b1a2">More...</a><br /></td></tr>
<tr class="separator:a93ba283d3040ef53d86d0bc2a3f0b1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad382749f17a735a0026d6972fae1ec15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ad382749f17a735a0026d6972fae1ec15">setupADC</a> ()</td></tr>
<tr class="separator:ad382749f17a735a0026d6972fae1ec15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae5e31a96ef99c47aa1f534765617d289"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../dc/d69/namespaceAH.html#a5674c973801a7f18514a073503f6f479">pin_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ae5e31a96ef99c47aa1f534765617d289">analogPin</a></td></tr>
<tr class="separator:ae5e31a96ef99c47aa1f534765617d289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4249a37e3f34471df75b2c122145d977"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a4249a37e3f34471df75b2c122145d977">mapFn</a> = nullptr</td></tr>
<tr class="separator:a4249a37e3f34471df75b2c122145d977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace39a3a491093b4c60eadf0095b05c98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d40/classEMA.html">EMA</a>&lt; FilterShiftFactor, FilterType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ace39a3a491093b4c60eadf0095b05c98">filter</a></td></tr>
<tr class="separator:ace39a3a491093b4c60eadf0095b05c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279c317254e16de0a9e7096eec50a2c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/dcb/classHysteresis.html">Hysteresis</a>&lt; <a class="el" href="../../dc/d69/namespaceAH.html#a4f2ec536d7413c6969f44d63ba14ce55">ADC_BITS</a>+Upsample - Precision, AnalogType, AnalogType &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#a279c317254e16de0a9e7096eec50a2c9">hysteresis</a></td></tr>
<tr class="separator:a279c317254e16de0a9e7096eec50a2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt;<br />
class AH::FilteredAnalog&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;</h3>

<p>A class that reads and filters an analog input. </p>
<p>A map function can be applied to the analog value (e.g. to compensate for logarithmic taper potentiometers or to calibrate the range). The analog input value is filtered using an exponential moving average filter. The default settings for this filter can be changed in Settings.hpp. <br  />
 After filtering, hysteresis is applied to prevent flipping back and forth between two values when the input is not changing.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Precision</td><td>The number of bits of precision the output should have. </td></tr>
    <tr><td class="paramname">FilterShiftFactor</td><td>The number of bits used for the <a class="el" href="../../d7/d40/classEMA.html" title="A class for single-pole infinite impulse response filters or exponential moving average filters.">EMA</a> filter. The pole location is \( 1 - \left(\frac{1}{2}\right)^{\mathrm{FilterShiftFactor}} \). <br  />
 A lower shift factor means less filtering ( \(0\) is no filtering), and a higher shift factor means more filtering (and more latency). </td></tr>
    <tr><td class="paramname">FilterType</td><td>The type to use for the intermediate types of the filter. <br  />
 Should be at least \( \mathrm{ADC_BITS} + \mathrm{Upsample} + \mathrm{FilterShiftFactor} \) bits wide. </td></tr>
    <tr><td class="paramname">AnalogType</td><td>The type to use for the analog values. <br  />
 Should be at least \( \mathrm{ADC_BITS} + \mathrm{Upsample} \) bits wide. </td></tr>
    <tr><td class="paramname">Upsample</td><td>The number of bits to upsample the analog reading by. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00054">54</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aa080a585e0ed40e33953d9ff07461c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa080a585e0ed40e33953d9ff07461c34">&#9670;&nbsp;</a></span>MappingFunction</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::<a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a> =  AnalogType (*)(AnalogType)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function pointer to a mapping function to map analog values. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#ad7af1da1c4c739d9d98c6a5e83267597" title="Specify a mapping function that is applied to the raw analog value before filtering.">map()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00066">66</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5b99fdade6a71bed01f34b87eeebed3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b99fdade6a71bed01f34b87eeebed3f">&#9670;&nbsp;</a></span>FilteredAnalog()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::<a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">FilteredAnalog</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d69/namespaceAH.html#a5674c973801a7f18514a073503f6f479">pin_t</a>&#160;</td>
          <td class="paramname"><em>analogPin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html" title="A class that reads and filters an analog input.">FilteredAnalog</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">analogPin</td><td>The analog pin to read from. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00062">62</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad7af1da1c4c739d9d98c6a5e83267597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7af1da1c4c739d9d98c6a5e83267597">&#9670;&nbsp;</a></span>map()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a>&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specify a mapping function that is applied to the raw analog value before filtering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>A function pointer to the mapping function. This function should take the filtered value (of ADC_BITS + Upsample bits wide) as a parameter, and should return a value of ADC_BITS + Upsample bits wide.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Applying the mapping function before filtering could result in the noise being amplified to such an extent that filtering it afterwards would be ineffective. <br  />
 Applying it after hysteresis would result in a lower resolution. <br  />
 That's why the mapping function is applied after filtering and before hysteresis. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00085">85</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="aace25be3f306a43da753cff64c1a9cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace25be3f306a43da753cff64c1a9cb5">&#9670;&nbsp;</a></span>invert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::invert </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invert the analog value. </p>
<p>For example, if the precision is 10 bits, when the analog input measures 1023, the output will be 0, and when the analog input measures 0, the output will be 1023.</p>
<dl class="section note"><dt>Note</dt><dd>This overrides the mapping function set by the <code>map</code> method. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00094">94</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a2564481d668e99c6025c6b5c79585b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2564481d668e99c6025c6b5c79585b21">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the analog input value, apply the mapping function, and update the average. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The value changed since last time it was updated. </td></tr>
    <tr><td class="paramname">false</td><td>The value is still the same. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00108">108</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a5b66ab797e655a2d2fbb94c4f9640e00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b66ab797e655a2d2fbb94c4f9640e00">&#9670;&nbsp;</a></span>getValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AnalogType <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::getValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the filtered value of the analog input with the mapping function applied. </p>
<dl class="section return"><dt>Returns</dt><dd>The filtered value of the analog input, as a number of <code>Precision</code> bits wide. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00124">124</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a8ecfa54ca201ac7209452eda588ecb48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ecfa54ca201ac7209452eda588ecb48">&#9670;&nbsp;</a></span>getFloatValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::getFloatValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the filtered value of the analog input with the mapping function applied as a floating point number from 0.0 to 1.0. </p>
<dl class="section return"><dt>Returns</dt><dd>The filtered value of the analog input, as a number from 0.0 to 1.0. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00133">133</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a93ba283d3040ef53d86d0bc2a3f0b1a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ba283d3040ef53d86d0bc2a3f0b1a2">&#9670;&nbsp;</a></span>getRawValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AnalogType <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::getRawValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the raw value of the analog input any filtering or mapping applied, but with its bit depth increased by <code>Upsample</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00141">141</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="ad382749f17a735a0026d6972fae1ec15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad382749f17a735a0026d6972fae1ec15">&#9670;&nbsp;</a></span>setupADC()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::setupADC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00146">146</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae5e31a96ef99c47aa1f534765617d289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e31a96ef99c47aa1f534765617d289">&#9670;&nbsp;</a></span>analogPin</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../dc/d69/namespaceAH.html#a5674c973801a7f18514a073503f6f479">pin_t</a> <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::analogPin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00153">153</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a4249a37e3f34471df75b2c122145d977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4249a37e3f34471df75b2c122145d977">&#9670;&nbsp;</a></span>mapFn</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html#aa080a585e0ed40e33953d9ff07461c34">MappingFunction</a> <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::mapFn = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00155">155</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="ace39a3a491093b4c60eadf0095b05c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace39a3a491093b4c60eadf0095b05c98">&#9670;&nbsp;</a></span>filter</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d40/classEMA.html">EMA</a>&lt;FilterShiftFactor, FilterType&gt; <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::filter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00160">160</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<a id="a279c317254e16de0a9e7096eec50a2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279c317254e16de0a9e7096eec50a2c9">&#9670;&nbsp;</a></span>hysteresis</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t Precision = 10, uint8_t FilterShiftFactor = ANALOG_FILTER_SHIFT_FACTOR, class FilterType = ANALOG_FILTER_TYPE, class AnalogType = analog_t, uint8_t Upsample = min(sizeof(FilterType) * CHAR_BIT - ADC_BITS - FilterShiftFactor,                  sizeof(AnalogType) * CHAR_BIT - ADC_BITS)&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/dcb/classHysteresis.html">Hysteresis</a>&lt;<a class="el" href="../../dc/d69/namespaceAH.html#a4f2ec536d7413c6969f44d63ba14ce55">ADC_BITS</a> + Upsample - Precision, AnalogType, AnalogType&gt; <a class="el" href="../../d3/d6e/classAH_1_1FilteredAnalog.html">AH::FilteredAnalog</a>&lt; Precision, FilterShiftFactor, FilterType, AnalogType, Upsample &gt;::hysteresis</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html#l00170">170</a> of file <a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../d8/df3/FilteredAnalog_8hpp_source.html">FilteredAnalog.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
