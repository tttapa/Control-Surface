<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: Control Surface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">develop</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Control Surface </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__home_runner_work_Control_Surface_Control_Surface_README"></a> <a href="https://github.com/tttapa/Control-Surface/actions?query=workflow%3A" title="CI+Tests"><img src="https://github.com/tttapa/Control-Surface/workflows/CI%20Tests/badge.svg?branch=main" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://tttapa.github.io/Control-Surface/Coverage/index.html"><img src="https://img.shields.io/endpoint?url=https://tttapa.github.io/Control-Surface/Coverage/shield.io.coverage.json" alt="Test Coverage" class="inline"/></a> <a href="https://github.com/tttapa/Control-Surface/actions?query=workflow%3AExamples"><img src="https://github.com/tttapa/Control-Surface/workflows/Examples/badge.svg?branch=main" alt="Examples" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/tttapa/Control-Surface"><img src="https://img.shields.io/github/stars/tttapa/Control-Surface?label=GitHub&amp;logo=github" alt="GitHub" class="inline"/></a> <a href="https://tttapa.github.io/Control-Surface/Doxygen"><img src="https://img.shields.io/badge/Documentation-main-blue" alt="Documentation" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md314"></a>
Control Surface</h1>
<p >Control Surface is an Arduino library for building MIDI controllers and control surfaces. At its core is a <a href="https://tttapa.github.io/Control-Surface/Doxygen/d3/df7/midi-tutorial.html">general-purpose MIDI abstraction layer</a> with support for serial MIDI, MIDI over USB, MIDI over BLE, etc., which can be useful for any MIDI-related project. <br  />
 Besides MIDI input/output, Control Surface also includes easy-to-use utilities specifically for building MIDI controllers, supporting controls that send MIDI ─ like potentiometers, push buttons, rotary encoders, etc. ─ and controls that react to incoming MIDI ─ LEDs, displays, and so on. They can also be combined into controls that use both MIDI input and output, such as motorized faders.</p>
<blockquote class="doxtable">
<p >&zwj;Table of contents <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#overview">Overview</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#example-usage">Example usage</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#getting-started">Getting started</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#documentation">Documentation</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#work-in-progress">Work in progress</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#supported-boards">Supported boards</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#information-for-developers">Information for developers</a> <br  />
 <span class="mono">¶</span>&emsp;<a class="el" href="index.html#change-log-and-updating">Change log and updating</a> <br  />
 </p>
</blockquote>
<p><a class="anchor" id="overview"></a></p>
<h2><a class="anchor" id="autotoc_md315"></a>
Overview</h2>
<p >This library turns your Arduino-compatible board into a MIDI control surface. <br  />
 Just connect some push buttons, potentiometers, LEDs ... and declare them in your code.</p>
<p >The following sections give a brief overview of the features of the library.</p>
<h3><a class="anchor" id="autotoc_md316"></a>
MIDI Interfaces</h3>
<ul>
<li><b>MIDI over USB</b></li>
<li><b>Serial MIDI</b> (e.g. 5-pin DIN MIDI)</li>
<li><b>Debug MIDI</b> (prints out the messages in a readable format, and allows you to input text based messages, like a MIDI monitor)</li>
<li><b>MIDI over Bluetooth LE</b></li>
<li><b>AppleMIDI</b> over WiFi or Ethernet</li>
</ul>
<p ><sub>→ <a href="https://tttapa.github.io/Control-Surface/Doxygen/dc/df0/group__MIDIInterfaces.html"><em>MIDI Interfaces documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md317"></a>
MIDI Control Output</h3>
<ul>
<li><b>Push buttons</b> and <b>toggle switches</b></li>
<li><b>Potentiometers</b>, <b>faders</b> and other analog sensors</li>
<li><b>Rotary encoders</b></li>
<li><b>Scanning keyboard matrices</b></li>
</ul>
<p >Digital inputs are <b>debounced</b>, and analog inputs are filtered using <b>digital filters and hysteresis</b>. This results in high accuracy without noise, without introducing latency.</p>
<p >These MIDI control outputs can be used to send MIDI notes, Control Change, Pitch Bend, Program/Patch change, etc.</p>
<p ><sub>→ <a href="https://tttapa.github.io/Control-Surface/Doxygen/d7/dcd/group__MIDIOutputElements.html"><em>MIDI Output Elements documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md318"></a>
MIDI Control Input</h3>
<ul>
<li><b>LEDs</b> (e.g. to indicate whether a track is muted/armed/soloed)</li>
<li><b>LED rings</b> (e.g. to indicate the position of a pan knob)</li>
<li><b>LED strips</b> (using the <a href="https://github.com/FastLED/FastLED">FastLED</a> library)</li>
<li><b>VU meters</b></li>
<li><b>OLED displays</b></li>
<li><b>7-segment displays</b></li>
</ul>
<p >A large portion of the <b>Mackie Control Universal</b> (<a class="el" href="d7/dc7/namespaceMCU.html">MCU</a>) protocol is implemented.</p>
<p ><sub>→ <a href="https://tttapa.github.io/Control-Surface/Doxygen/df/d8b/group__MIDIInputElements.html"><em>MIDI Input Elements documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md319"></a>
Motorized faders</h3>
<ul>
<li><b>Motorized faders</b> are supported through the <a href="https://github.com/tttapa/Control-Surface-Motor-Fader">tttapa/Control-Surface-Motor-Fader</a> repository.</li>
</ul>
<p ><sub>→ <a href="https://tttapa.github.io/Pages/Arduino/Control-Theory/Motor-Fader/"><em>Control Surface Motor Fader documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md320"></a>
Bank support</h3>
<p >All controls can be arranged in <b>banks</b>: for example, if you have only 4 physical faders, you can make them bankable, so they can be used to control the volume of many different tracks, by selecting the corresponding bank.</p>
<p >Selecting a bank can be done using push buttons, rotary encoders, etc.</p>
<p >Apart from banks and bank selectors, you can also add <b>transposers</b> to change the key of your notes, for example.</p>
<h3><a class="anchor" id="autotoc_md321"></a>
Extended input/output</h3>
<p >In order to save some IO pins, the library natively supports <b>multiplexers</b> (e.g. 74HC4051 or 74HC4067) to read many switches or potentiometers, <b>Shift Registers</b> (e.g. 74HC595) to drive many LEDs, <b>MAX7219 LED drivers</b>, etc.</p>
<p ><sub>→ <a href="https://tttapa.github.io/Control-Surface/Doxygen/db/dd3/group__AH__ExtIO.html"><em>Extended IO documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md322"></a>
Audio</h3>
<p >If you are using a Teensy 3.x or 4.x, you can use it as a <b>USB audio interface</b>. Just add an I²S DAC (e.g. PCM5102) and 5 lines of code, and you can start playing audio through your Teensy, by combining Control Surface with the Teensy Audio library. <br  />
 You can also add volume controls and VU meters for these audio connections.</p>
<p ><sub>→ <a href="https://tttapa.github.io/Control-Surface/Doxygen/d3/d5c/group__Audio.html"><em>Teensy Audio documentation</em></a></sub></p>
<h3><a class="anchor" id="autotoc_md323"></a>
Modular and extensible</h3>
<p >Thanks to the structure of the library, you can easily add your own MIDI or display elements, using some minimal, high level code. All low level stuff is completely <b>reusable</b> (e.g. all MIDI operations, debouncing switches, filtering analog inputs, and so on).</p>
<p ><a class="anchor" id="example-usage"></a></p>
<h2><a class="anchor" id="autotoc_md324"></a>
Example usage</h2>
<p >A complete sketch for a MIDI controller with a potentiometer that sends out MIDI Control Change message can be written in just five lines of code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;</div>
<div class="line"><a class="code hl_class" href="db/d32/classCCPotentiometer.html">CCPotentiometer</a> pot { A0, <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#a6eb9900d522be13f07efce201817046d">MIDI_CC::General_Purpose_Controller_1</a> };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() { <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">begin</a>(); }</div>
<div class="line"><span class="keywordtype">void</span> loop() { <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">loop</a>(); }</div>
<div class="ttc" id="aControl__Surface_8h_html"><div class="ttname"><a href="db/dbf/Control__Surface_8h.html">Control_Surface.h</a></div><div class="ttdoc">The main header file that includes all Control-Surface header files.</div></div>
<div class="ttc" id="aControl__Surface__Class_8cpp_html_af7a5d250297d82b2b29605dd7ac250df"><div class="ttname"><a href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a></div><div class="ttdeci">Control_Surface_ &amp; Control_Surface</div><div class="ttdoc">A predefined instance of the Control Surface to use in the Arduino sketches.</div><div class="ttdef"><b>Definition:</b> <a href="d9/d38/Control__Surface__Class_8cpp_source.html#l00338">Control_Surface_Class.cpp:338</a></div></div>
<div class="ttc" id="aclassCCPotentiometer_html"><div class="ttname"><a href="db/d32/classCCPotentiometer.html">CCPotentiometer</a></div><div class="ttdoc">A class of MIDIOutputElements that read the analog input from a potentiometer or fader,...</div><div class="ttdef"><b>Definition:</b> <a href="d4/df0/CCPotentiometer_8hpp_source.html#l00019">CCPotentiometer.hpp:19</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_ab0bdf5cca484fb2ba637c39384b27fb2"><div class="ttname"><a href="dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">Control_Surface_::begin</a></div><div class="ttdeci">void begin()</div><div class="ttdoc">Initialize the Control_Surface.</div><div class="ttdef"><b>Definition:</b> <a href="d9/d38/Control__Surface__Class_8cpp_source.html#l00022">Control_Surface_Class.cpp:22</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_afe461d27b9c48d5921c00d521181f12f"><div class="ttname"><a href="dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">Control_Surface_::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">Update all MIDI elements, send MIDI events and read MIDI input.</div><div class="ttdef"><b>Definition:</b> <a href="d9/d38/Control__Surface__Class_8cpp_source.html#l00071">Control_Surface_Class.cpp:71</a></div></div>
<div class="ttc" id="aclassUSBMIDI__Interface_html"><div class="ttname"><a href="de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.</div><div class="ttdef"><b>Definition:</b> <a href="d1/d64/USBMIDI__Interface_8hpp_source.html#l00148">USBMIDI_Interface.hpp:149</a></div></div>
<div class="ttc" id="anamespaceMIDI__CC_html_a6eb9900d522be13f07efce201817046d"><div class="ttname"><a href="d4/dbe/namespaceMIDI__CC.html#a6eb9900d522be13f07efce201817046d">MIDI_CC::General_Purpose_Controller_1</a></div><div class="ttdeci">constexpr uint8_t General_Purpose_Controller_1</div><div class="ttdef"><b>Definition:</b> <a href="d9/d43/Control__Change_8hpp_source.html#l00032">Control_Change.hpp:32</a></div></div>
</div><!-- fragment --><p >Larger MIDI controllers can implemented very easily as well, with clean and easy to modify code. <br  />
 The following sketch is for 8 potentiometers (connected using an analog multiplexer) that send out MIDI Control Change messages over USB.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span>  <span class="comment">// Include the library</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;  <span class="comment">// Instantiate a MIDI Interface to use</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Instantiate an analog multiplexer</span></div>
<div class="line"><a class="code hl_typedef" href="db/dd3/group__AH__ExtIO.html#ga3ab4921db62494df27df05daf4b11e70">CD74HC4051</a> mux {</div>
<div class="line">  A0,       <span class="comment">// Analog input pin</span></div>
<div class="line">  {3, 4, 5} <span class="comment">// Address pins S0, S1, S2</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create an array of CCPotentiometer objects that send out MIDI Control Change </span></div>
<div class="line"><span class="comment">// messages when you turn the potentiometers connected to the 8 inputs of the mux.</span></div>
<div class="line"><a class="code hl_class" href="db/d32/classCCPotentiometer.html">CCPotentiometer</a> volumePotentiometers[] {</div>
<div class="line">  { mux.pin(0), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#a40d189f24e13a7304f2c9094038588ae">Channel_1</a> } },</div>
<div class="line">  { mux.pin(1), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#a6002e13e1e175446065a3eb90373fcfd">Channel_2</a> } },</div>
<div class="line">  { mux.pin(2), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#a1c32ffd7bfc55fa946f967d4d7fcba35">Channel_3</a> } },</div>
<div class="line">  { mux.pin(3), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#ab5ffea9d2f388fc094046fbe8cbf6b1b">Channel_4</a> } },</div>
<div class="line">  { mux.pin(4), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#ad55a9954f18a5b89f78e9d332930bfb1">Channel_5</a> } },</div>
<div class="line">  { mux.pin(5), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#a12a8004e400b6460414618990b43b924">Channel_6</a> } },</div>
<div class="line">  { mux.pin(6), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#a06c280a3f8771fbcb217713f5b2121c1">Channel_7</a> } },</div>
<div class="line">  { mux.pin(7), { <a class="code hl_variable" href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a>, <a class="code hl_variable" href="d7/d42/Channel_8hpp.html#af44b83db16bf73e5229fc2c3f2995f74">Channel_8</a> } },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">begin</a>();  <span class="comment">// Initialize the Control Surface</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">loop</a>();  <span class="comment">// Update the Control Surface</span></div>
<div class="line">}</div>
<div class="ttc" id="aChannel_8hpp_html_a06c280a3f8771fbcb217713f5b2121c1"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#a06c280a3f8771fbcb217713f5b2121c1">Channel_7</a></div><div class="ttdeci">constexpr Channel Channel_7</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00124">Channel.hpp:124</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_a12a8004e400b6460414618990b43b924"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#a12a8004e400b6460414618990b43b924">Channel_6</a></div><div class="ttdeci">constexpr Channel Channel_6</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00123">Channel.hpp:123</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_a1c32ffd7bfc55fa946f967d4d7fcba35"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#a1c32ffd7bfc55fa946f967d4d7fcba35">Channel_3</a></div><div class="ttdeci">constexpr Channel Channel_3</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00120">Channel.hpp:120</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_a40d189f24e13a7304f2c9094038588ae"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#a40d189f24e13a7304f2c9094038588ae">Channel_1</a></div><div class="ttdeci">constexpr Channel Channel_1</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00118">Channel.hpp:118</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_a6002e13e1e175446065a3eb90373fcfd"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#a6002e13e1e175446065a3eb90373fcfd">Channel_2</a></div><div class="ttdeci">constexpr Channel Channel_2</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00119">Channel.hpp:119</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_ab5ffea9d2f388fc094046fbe8cbf6b1b"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#ab5ffea9d2f388fc094046fbe8cbf6b1b">Channel_4</a></div><div class="ttdeci">constexpr Channel Channel_4</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00121">Channel.hpp:121</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_ad55a9954f18a5b89f78e9d332930bfb1"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#ad55a9954f18a5b89f78e9d332930bfb1">Channel_5</a></div><div class="ttdeci">constexpr Channel Channel_5</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00122">Channel.hpp:122</a></div></div>
<div class="ttc" id="aChannel_8hpp_html_af44b83db16bf73e5229fc2c3f2995f74"><div class="ttname"><a href="d7/d42/Channel_8hpp.html#af44b83db16bf73e5229fc2c3f2995f74">Channel_8</a></div><div class="ttdeci">constexpr Channel Channel_8</div><div class="ttdef"><b>Definition:</b> <a href="d7/d42/Channel_8hpp_source.html#l00125">Channel.hpp:125</a></div></div>
<div class="ttc" id="agroup__AH__ExtIO_html_ga3ab4921db62494df27df05daf4b11e70"><div class="ttname"><a href="db/dd3/group__AH__ExtIO.html#ga3ab4921db62494df27df05daf4b11e70">AH::CD74HC4051</a></div><div class="ttdeci">AnalogMultiplex&lt; 3 &gt; CD74HC4051</div><div class="ttdoc">An alias for AnalogMultiplex&lt;3&gt; to use with CD74HC4051 analog multiplexers.</div><div class="ttdef"><b>Definition:</b> <a href="d7/def/AnalogMultiplex_8hpp_source.html#l00196">AnalogMultiplex.hpp:196</a></div></div>
<div class="ttc" id="anamespaceMIDI__CC_html_ac73258d1263f61f65fc27976b6aa9a64"><div class="ttname"><a href="d4/dbe/namespaceMIDI__CC.html#ac73258d1263f61f65fc27976b6aa9a64">MIDI_CC::Channel_Volume</a></div><div class="ttdeci">constexpr uint8_t Channel_Volume</div><div class="ttdef"><b>Definition:</b> <a href="d9/d43/Control__Change_8hpp_source.html#l00023">Control_Change.hpp:23</a></div></div>
</div><!-- fragment --><p >Control Surface supports many types of MIDI inputs. For example, an LED that turns on when a MIDI Note On message for middle C is received: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;</div>
<div class="line"><a class="code hl_class" href="d9/d55/classNoteCCKPLED.html">NoteLED</a> led { LED_BUILTIN, <a class="code hl_variable" href="d7/d78/namespaceMIDI__Notes.html#adc612a1e4e057463777480eabc3fb0ca">MIDI_Notes::C</a>(4) };</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() { <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">begin</a>(); }</div>
<div class="line"><span class="keywordtype">void</span> loop() { <a class="code hl_variable" href="d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a class="code hl_function" href="dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">loop</a>(); }</div>
<div class="ttc" id="aclassNoteCCKPLED_html"><div class="ttname"><a href="d9/d55/classNoteCCKPLED.html">NoteCCKPLED</a></div><div class="ttdoc">Generic base class for classes that listen for MIDI Note, Control Change and Key Pressure events on a...</div><div class="ttdef"><b>Definition:</b> <a href="d2/df7/NoteCCKPLED_8hpp_source.html#l00020">NoteCCKPLED.hpp:20</a></div></div>
<div class="ttc" id="anamespaceMIDI__Notes_html_adc612a1e4e057463777480eabc3fb0ca"><div class="ttname"><a href="d7/d78/namespaceMIDI__Notes.html#adc612a1e4e057463777480eabc3fb0ca">MIDI_Notes::C</a></div><div class="ttdeci">constexpr Note C</div><div class="ttdoc">C (Do)</div><div class="ttdef"><b>Definition:</b> <a href="d9/dc5/Notes_8hpp_source.html#l00040">Notes.hpp:40</a></div></div>
</div><!-- fragment --><p ><a class="anchor" id="getting-started"></a></p>
<h2><a class="anchor" id="autotoc_md325"></a>
Getting started</h2>
<p >See the <a href="https://tttapa.github.io/Control-Surface/Doxygen/d5/d7d/md_pages_Getting-Started.html"><b>Getting Started</b></a> page to get started using the library. <br  />
 It'll also point you to the <a href="https://tttapa.github.io/Control-Surface/Doxygen/d8/da8/md_pages_Installation.html"><b>Installation Instructions</b></a>.</p>
<p >The <a href="https://tttapa.github.io/Control-Surface/Doxygen/d3/df7/midi-tutorial.html"><b>MIDI tutorial</b></a> might be useful if you want to use Control Surface as a regular MIDI library, for sending and receiving MIDI messages.</p>
<p ><a class="anchor" id="documentation"></a></p>
<h2><a class="anchor" id="autotoc_md326"></a>
Documentation</h2>
<p >The automatically generated Doxygen documentation for this library can be found here: <br  />
 <a href="https://tttapa.github.io/Control-Surface/Doxygen/index.html"><b>Documentation</b></a> <br  />
 Test coverage information can be found here: <br  />
 <a href="https://tttapa.github.io/Control-Surface/Coverage/index.html"><b>Code Coverage</b></a> <br  />
 Arduino examples can be found here: <br  />
 <a href="https://tttapa.github.io/Control-Surface/Doxygen/examples.html"><b>Examples</b></a></p>
<p >Have a look at the <a href="https://tttapa.github.io/Control-Surface/Doxygen/modules.html"><b>modules</b></a> for an overview of the features of the library, it's the best entry point for the documentation.</p>
<p >You can find an answer to some frequently asked questions on the <a href="https://tttapa.github.io/Control-Surface/Doxygen/da/dc1/FAQ.html"><b>FAQ</b></a> page.</p>
<p ><a class="anchor" id="work-in-progress"></a></p>
<h2><a class="anchor" id="autotoc_md327"></a>
Work in progress</h2>
<ul>
<li>Adding more tests (currently at over 560 unit tests)</li>
<li>Adding more examples and adding comments to existing examples</li>
<li>Finishing the documentation</li>
</ul>
<p ><a class="anchor" id="supported-boards"></a></p>
<h2><a class="anchor" id="autotoc_md328"></a>
Supported boards</h2>
<p >For each commit, the continuous integration tests compile the examples for the following boards:</p>
<ul>
<li>Arduino UNO</li>
<li>Arduino Mega</li>
<li>Arduino Leonardo</li>
<li>Teensy 3.2</li>
<li>Teensy 4.1</li>
<li>Arduino Due</li>
<li>Arduino Nano Every</li>
<li>Arduino Nano 33 IoT</li>
<li>Arduino Nano 33 BLE</li>
<li>Arduino Nano Every</li>
<li>Arduino UNO R4 Minima</li>
<li>ESP8266</li>
<li>ESP32</li>
<li>Raspberry Pi Pico</li>
</ul>
<p >This covers a very large part of the Arduino platform, and similar boards will also work. For example, the Arduino Nano, Mega, Micro, Pro Micro, Teensy 2.0, Teensy LC, Teensy 3.x, Teensy 4.x are all known to work.</p>
<p >If you have a board that's not supported, please <a href="https://github.com/tttapa/Control-Surface/issues/new">open an issue</a> and let me know!</p>
<p >Note that MIDI over USB and MIDI over Bluetooth are not supported on all boards. <br  />
 For MIDI over USB support, check out the <a href="https://tttapa.github.io/Control-Surface/Doxygen/d8/d4a/md_pages_MIDI-over-USB.html"><b>MIDI over USB</b></a> documentation page. As a general rule of thumb, if your board is supported by the <a href="https://github.com/arduino-libraries/MIDIUSB">MIDIUSB library</a> or if it's a Teensy, MIDI over USB should be supported. <br  />
 MIDI over BLE is currently only supported on ESP32.</p>
<p ><a class="anchor" id="information-for-developers"></a></p>
<h2><a class="anchor" id="autotoc_md329"></a>
Information for developers</h2>
<p >Information for people that would like to help improve the Control Surface library can be found here: <a href="https://tttapa.github.io/Pages/Arduino/Control-Surface/Developers/index.html">https://tttapa.github.io/Pages/Arduino/Control-Surface/Developers/index.html</a> <br  />
 It covers installation instructions for developers, instructions for running the tests and generating documentation, a style guide, etc.</p>
<p ><a class="anchor" id="change-log-and-updating"></a></p>
<h2><a class="anchor" id="autotoc_md330"></a>
Change log and updating</h2>
<h3><a class="anchor" id="autotoc_md331"></a>
2.x</h3>
<ul>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/aaf6eea2206c6e3b6a2004e0520100342945983f">aaf6eea</a>) <br  />
 The upper case <code>CHANNEL_x</code> and <code>CABLE_x</code> constants have been deprecated in favor of the title case versions <code>Channel_x</code> and <code>Cable_x</code>. This was done to avoid conflicts with macros defined by the ArduinoCore-renesas. <br  />
 For the same reason, the <code>CS</code> namespace has been renamed to <code>cs</code>.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/47b2d5e7530da4c940fc99e606cfad0c6a0638a2">47b2d5e</a>) <br  />
 The <code>Encoder</code> class has been replaced by <a href="https://tttapa.github.io/Control-Surface/Doxygen/dd/da9/classAHEncoder.html"><code>AHEncoder</code></a>. The code has been cleaned up and support was added for newer boards like the Raspberry Pi Pico.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/c35f29ced7f3e491467bd61c1c71013099c01091">c35f29c</a>) <br  />
 The SoftwareSerial MIDI interfaces are now in separate header files that have to be included explicitly if you want to use them. The headers in question are <a href="https://tttapa.github.io/Control-Surface/Doxygen/d3/df2/SoftwareSerialMIDI__Interface_8hpp.html"><code>SoftwareSerialMIDI_Interface.hpp</code></a> and <a href="https://tttapa.github.io/Control-Surface/Doxygen/de/d83/SoftwareSerialDebugMIDI__Interface_8hpp.html"><code>SoftwareSerialDebugMIDI_Interface.hpp</code></a>. This prevents redefinition errors of pin change interrupt vectors even if SoftwareSerial is not used.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/bf8fb661fa97fb6420584362bfcee7ce67939f59">bf8fb66</a>) <br  />
 The abbreviated MIDI send functions (such as <code>sendCC()</code>) have been deprecated in favor of the full names (e.g. <code>sendControlChange()</code>). See the <a href="https://tttapa.github.io/Control-Surface/Doxygen/d6/d72/classMIDI__Sender.html">MIDI_Sender documentation</a> for a full overview.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/cf32e7e72d81269e97f18ba51c42ba10715d1852">cf32e7e</a>) <br  />
 <code>Control_Surface.setMIDIInputCallbacks()</code> now takes four arguments instead of three, because a System Common callback was added.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/b727931a44cb1e262ac32901f1e307583da90624">b727931</a>) <br  />
 The MIDI note name for the note F has been changed from <code>F</code> to <code>F_</code> in order to avoid conflicts with the <code>F()</code> macro and its functional equivalent introduced <a href="https://github.com/arduino/ArduinoCore-mbed/blob/7a8d3ee46262d943f7cc1158f8bce06f61c3ddb2/cores/arduino/Arduino.h#L35-L41">here</a>. <br  />
 It is now recommended to use <code>MIDI_Notes::C(4)</code> instead of <code>note(C, 4)</code>.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/a81bd1927298decc2ea3852fd2f00e8028c14b81">a81bd19</a>) <br  />
 Classes that make use of the SPI interface now require you to pass the <code>SPI</code> object as a constructor argument. This allows you to use <code>SPI1</code> or <code>SPI2</code> (if available for your hardware).</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/c6e35b960ac15bc1b5cf5c588139d437ccd9cb68">c6e35b9</a>) <br  />
 The <code>NoteBitmapDisplay</code> class has been renamed to <code><a class="el" href="da/dce/classBitmapDisplay.html" title="A class that displays a bitmap depending on the state of a MIDINote or any other object that has a ge...">BitmapDisplay</a></code>.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/37b6901cbe56babc47c297a132381d53deaa45e8">37b6901</a>) <br  />
 The <code>NoteValueLED</code> and <code>CCValueLED</code> classes (and similar) have been replaced by <code>NoteLED</code> and <code>CCLED</code> respectively. <br  />
 The display elements <code><a class="el" href="da/dce/classBitmapDisplay.html" title="A class that displays a bitmap depending on the state of a MIDINote or any other object that has a ge...">BitmapDisplay</a></code>, <code>VPotDisplay</code>, <code>VUDisplay</code> etc. are now generic in the type of value that they display. In most cases, you should be able to update your sketch by adding <code>&lt;&gt;</code> after the type names, e.g. <code><a class="el" href="da/dce/classBitmapDisplay.html" title="A class that displays a bitmap depending on the state of a MIDINote or any other object that has a ge...">BitmapDisplay</a>&lt;&gt;</code>, <code>VPotDisplay&lt;&gt;</code>, etc.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/1a21d1344f57066fa1eda3819eaf89cbbc79c14e">1a21d13</a>) <br  />
 The line numbers of <code>LCDDisplay</code> are now one-based: <code>1</code> is the first line and <code>2</code> is the second line. This is more consistent with the track parameter and the API of the rest of the library. (Before, the first line was <code>0</code> and the second line was <code>1</code>.)</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/40e3d7a4377b281e58dd7725f1bb8c6198855ce6">40e3d7a</a>) <br  />
 Control Surface now comes with an Encoder library out of the box. You no longer have to install or include <code>Encoder.h</code> in your sketches.</li>
</ul>
<h3><a class="anchor" id="autotoc_md332"></a>
1.x</h3>
<ul>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/8a3b1b314cf5b4aedf3ad60cbbc492fbcbb25c73">8a3b1b3</a>) <br  />
 Before, <code>Control_Surface.MIDI()</code> was used to get the MIDI interface used by Control Surface. This method was removed, because you can now connect multiple interfaces to Control Surface, using the <a href="https://tttapa.github.io/Control-Surface/Doxygen/df/d72/classMIDI__Pipe.html#details">MIDI Pipe routing system</a>. To send MIDI using Control Surface, you can now use <code>Control_Surface.sendCC(...)</code> and the other similar methods directly.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/8a3b1b314cf5b4aedf3ad60cbbc492fbcbb25c73">8a3b1b3</a>) <br  />
 For the same reason as the bullet above, the <code>MultiMIDI_Interface</code> was removed, and has been replaced by the <a href="https://tttapa.github.io/Control-Surface/Doxygen/df/d72/classMIDI__Pipe.html#details">MIDI Pipe routing system</a>.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/bca6e11b2b3e02df5f600f65c81676708a81155b">bca6e11</a>) <br  />
 The color mapper for <code>NoteRangeFastLED</code> and the like now takes a second parameter that represents the index of the LED within the LED strip.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/3c01c7d5eb60e59720540d5a77095468e6984a58">3c01c7d</a>) <br  />
 The <b>maximum supported ADC resolution is now used by default</b> (e.g. 13 bits on Teensy 3.x, 12 bits on ESP32). <br  />
 This increases the accuracy of analog inputs and controls for the Control Surface library, but could cause problems if your code uses other libraries that expect the resolution to be 10 bits. <br  />
 You can change the default resolution to 10 bits in <a href="https://tttapa.github.io/Control-Surface/Doxygen/dc/d69/namespaceAH.html#a4f2ec536d7413c6969f44d63ba14ce55"><code>src/AH/Settings/Settings.hpp</code></a> if you have to.</li>
<li>(<a href="https://github.com/tttapa/Control-Surface/commit/31edaa6b76477fdf152c19fd34f7e4e8506561e6">31edaa6</a>) <br  />
 The <b>mapping function</b> is now applied before applying hysteresis. <br  />
 This means that the input and output values of the function should be 16 - <code>ANALOG_FILTER_SHIFT_FACTOR</code> bits wide instead of 7. By default this is <b>14 bits</b>. You can get the maximum value in a portable way by using the <code>FilteredAnalog&lt;&gt;::getMaxRawValue()</code> function. <br  />
 The signature of the mapping function is now <code>analog_t f(analog_t raw)</code>, where the return value and raw are both numbers in [0, 16383] by default. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
