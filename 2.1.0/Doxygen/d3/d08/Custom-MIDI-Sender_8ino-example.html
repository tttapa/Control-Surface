<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: Custom-MIDI-Sender.ino</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">2.1.0</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Custom-MIDI-Sender.ino</div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="custom-midi-sender"></a>
Custom-MIDI-Sender</h1>
<p>This is an example that demonstrates how to extend the library using your own MIDI Senders. It implements functionality similar to the built-in <a class="el" href="../../dc/dd4/classDigitalNoteSender.html">DigitalNoteSender</a> class, but with support for different on and off velocities.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/dab/group__MIDI__Senders.html">MIDI Senders</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">for</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">different</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">kinds</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">of</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">MIDI</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">senders</a> <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">to</a> start <a class="el" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9" title="Copy an Array to an Array of a different type.">from</a>.</dd></dl>
<dl class="section user"><dt>Boards: <b class="boards-info" title="Control Surface&apos;s automated continuous integration workflows regularly verify that this example compiles successfully for the following boards. The list is not exhaustive, and the example will most likely work on other boards as well (perhaps requiring slight modifications).">ðŸ›ˆ</b> </dt><dd>AVR, AVR USB, Due, Nano 33 IoT, Nano 33 BLE, UNO R4, Pi Pico, Teensy 3.x, ESP32</dd></dl>
<h2><a class="anchor" id="connections-53"></a>
Connections</h2>
<ul>
<li>5: momentary push button (to ground)</li>
</ul>
<p>The internal pull-up resistor for the button will be enabled automatically.</p>
<h2><a class="anchor" id="behavior-55"></a>
Behavior</h2>
<ul>
<li>When the button on pin 5 is pressed, a MIDI Note On message is sent for note C4 with velocity 0x40.</li>
<li>When the button on pin 5 is released, a MIDI Note Off message is sent for note C4 with velocity 0x10.</li>
</ul>
<h2><a class="anchor" id="mapping-26"></a>
Mapping</h2>
<p>Select the Arduino as a custom MIDI controller in your DAW, and use the MIDI learn option to assign the button to a function.</p>
<p>Written by PieterP, 2020-04-18 <br  />
 <a href="https://github.com/tttapa/Control-Surface">https://github.com/tttapa/Control-Surface</a></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// A custom sender to use later. It has to declare two methods:</span></div>
<div class="line"><span class="comment">// - sendOn(MIDIAddress): will be called when the button is pressed</span></div>
<div class="line"><span class="comment">// - sendOff(MIDIAddress): will be called when the button is released</span></div>
<div class="line"><span class="comment">// Other types of senders need to implement different methods.</span></div>
<div class="line"><span class="comment">// For example, a continuous CC sender just has a send(value, address)</span></div>
<div class="line"><span class="comment">// method.</span></div>
<div class="line"><span class="keyword">class </span><a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">CustomNoteSender</a> {</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">CustomNoteSender</a>(<a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">uint8_t</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">uint8_t</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>)</div>
<div class="line">    : <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>(<a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>), <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>(<a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>) {}</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> sendOn(<a id="_a1" name="_a1"></a><a class="code hl_class" href="../../d7/d0f/classMIDIAddress.html">MIDIAddress</a> address) {</div>
<div class="line">    <a id="a2" name="a2"></a><a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a3" name="a3"></a><a class="code hl_function" href="../../d6/d72/classMIDI__Sender.html#ad487d041b8e9d10d58aba470a15e1fc6">sendNoteOn</a>(address, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> sendOff(<a class="code hl_class" href="../../d7/d0f/classMIDIAddress.html">MIDIAddress</a> address) {</div>
<div class="line">    <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a4" name="a4"></a><a class="code hl_function" href="../../d6/d72/classMIDI__Sender.html#ae5438982b69a41d7b4565328f5fd73c8">sendNoteOff</a>(address, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">uint8_t</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now tell the MIDIButton class template (included with the Control</span></div>
<div class="line"><span class="comment">// Surface library) that it has to use your custom sender class.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// We wrap it in another class so we can easily construct it later,</span></div>
<div class="line"><span class="comment">// without having to write `MIDIButton&lt;CustomNoteSender&gt;` all the time,</span></div>
<div class="line"><span class="comment">// and so we have more control over the constructor arguments.</span></div>
<div class="line"><span class="comment">// The colon (:) indicates inheritance.</span></div>
<div class="line"><span class="keyword">struct </span><a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">CustomNoteButton</a> : <a id="_a5" name="_a5"></a><a class="code hl_class" href="../../d6/d72/classMIDIButton.html">MIDIButton</a>&lt;CustomNoteSender&gt; {</div>
<div class="line">  <span class="comment">// Constructor</span></div>
<div class="line">  <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">CustomNoteButton</a>(pin_t pin, <a class="code hl_class" href="../../d7/d0f/classMIDIAddress.html">MIDIAddress</a> address, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">uint8_t</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>,</div>
<div class="line">                   <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">uint8_t</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>)</div>
<div class="line">    : <a class="code hl_class" href="../../d6/d72/classMIDIButton.html">MIDIButton</a>(pin, address, {<a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">onVelocity</a>, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">offVelocity</a>}) {}</div>
<div class="line">  <span class="comment">//  ^~~~~~~~~~ Initialization of the base class MIDIButton</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now we can instantiate an object of our custom class.</span></div>
<div class="line"><span class="comment">// The four arguments match the ones of the CustomNoteButton</span></div>
<div class="line"><span class="comment">// constructor we wrote a couple of lines back.</span></div>
<div class="line"><a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">CustomNoteButton</a> button {</div>
<div class="line">  5,                <span class="comment">// button pin</span></div>
<div class="line">  <a id="a6" name="a6"></a><a class="code hl_variable" href="../../d7/d78/namespaceMIDI__Notes.html#adc612a1e4e057463777480eabc3fb0ca">MIDI_Notes::C</a>[4], <span class="comment">// MIDI address</span></div>
<div class="line">  0x40,             <span class="comment">// on velocity</span></div>
<div class="line">  0x10,             <span class="comment">// off velocity</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">setup</a>() {</div>
<div class="line">  <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a7" name="a7"></a><a class="code hl_function" href="../../dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">begin</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a8" name="a8"></a><a class="code hl_function" href="../../dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">loop</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aControl__Surface_8h_html"><div class="ttname"><a href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a></div><div class="ttdoc">The main header file that includes all Control-Surface header files.</div></div>
<div class="ttc" id="aControl__Surface__Class_8cpp_html_af7a5d250297d82b2b29605dd7ac250df"><div class="ttname"><a href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a></div><div class="ttdeci">Control_Surface_ &amp; Control_Surface</div><div class="ttdoc">A predefined instance of the Control Surface to use in the Arduino sketches.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00338">Control_Surface_Class.cpp:338</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_ab0bdf5cca484fb2ba637c39384b27fb2"><div class="ttname"><a href="../../dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">Control_Surface_::begin</a></div><div class="ttdeci">void begin()</div><div class="ttdoc">Initialize the Control_Surface.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00022">Control_Surface_Class.cpp:22</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_afe461d27b9c48d5921c00d521181f12f"><div class="ttname"><a href="../../dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">Control_Surface_::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">Update all MIDI elements, send MIDI events and read MIDI input.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00071">Control_Surface_Class.cpp:71</a></div></div>
<div class="ttc" id="aclassMIDIAddress_html"><div class="ttname"><a href="../../d7/d0f/classMIDIAddress.html">MIDIAddress</a></div><div class="ttdoc">A type-safe utility class for saving a MIDI address consisting of a 7-bit address,...</div><div class="ttdef"><b>Definition</b> <a href="../../db/dd6/MIDIAddress_8hpp_source.html#l00145">MIDIAddress.hpp:145</a></div></div>
<div class="ttc" id="aclassMIDIButton_html"><div class="ttname"><a href="../../d6/d72/classMIDIButton.html">MIDIButton</a></div><div class="ttdoc">An abstract class for momentary push buttons that send MIDI events.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d47/Abstract_2MIDIButton_8hpp_source.html#l00017">Abstract/MIDIButton.hpp:17</a></div></div>
<div class="ttc" id="aclassMIDI__Sender_html_ad487d041b8e9d10d58aba470a15e1fc6"><div class="ttname"><a href="../../d6/d72/classMIDI__Sender.html#ad487d041b8e9d10d58aba470a15e1fc6">MIDI_Sender::sendNoteOn</a></div><div class="ttdeci">void sendNoteOn(MIDIAddress address, uint8_t velocity)</div><div class="ttdoc">Send a MIDI Note On event.</div></div>
<div class="ttc" id="aclassMIDI__Sender_html_ae5438982b69a41d7b4565328f5fd73c8"><div class="ttname"><a href="../../d6/d72/classMIDI__Sender.html#ae5438982b69a41d7b4565328f5fd73c8">MIDI_Sender::sendNoteOff</a></div><div class="ttdeci">void sendNoteOff(MIDIAddress address, uint8_t velocity)</div><div class="ttdoc">Send a MIDI Note Off event.</div></div>
<div class="ttc" id="aclassUSBMIDI__Interface_html"><div class="ttname"><a href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d64/USBMIDI__Interface_8hpp_source.html#l00164">USBMIDI_Interface.hpp:165</a></div></div>
<div class="ttc" id="agroup__AH__Containers_html_ga6ee13d5c260727ac6a7de2ee21cc76f9"><div class="ttname"><a href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">AH::copyAs</a></div><div class="ttdeci">Array&lt; T, N &gt; copyAs(const Array&lt; U, N &gt; &amp;src)</div><div class="ttdoc">Copy an Array to an Array of a different type.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db6/ArrayHelpers_8hpp_source.html#l00105">ArrayHelpers.hpp:105</a></div></div>
<div class="ttc" id="anamespaceMIDI__Notes_html_adc612a1e4e057463777480eabc3fb0ca"><div class="ttname"><a href="../../d7/d78/namespaceMIDI__Notes.html#adc612a1e4e057463777480eabc3fb0ca">MIDI_Notes::C</a></div><div class="ttdeci">constexpr Note C</div><div class="ttdoc">C (Do)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dc5/Notes_8hpp_source.html#l00056">Notes.hpp:56</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
