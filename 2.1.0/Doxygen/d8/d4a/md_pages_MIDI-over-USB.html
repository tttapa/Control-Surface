<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: MIDI over USB</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">2.1.0</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">MIDI over USB</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_pages_2MIDI-over-USB"></a>There are some differences in MIDI over USB implementation between different types of Arduino-compatible boards. This page provides an overview and some board recommendations if you're planning to build an Arduino MIDI device with MIDI over USB support.</p>
<p>✅ = supported <br  />
 🔼 = implemented but not tested (if you try it out, please let me know by <a href="https://github.com/tttapa/Control-Surface/discussions">opening a discussion</a>!) <br  />
 ❓ = supported by hardware but not implemented <br  />
 ❌ = unsupported by hardware or Arduino core <br  />
</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Board   </th><th class="markdownTableHeadCenter">MIDI over Serial   </th><th class="markdownTableHeadCenter">MIDI over USB (device)   </th><th class="markdownTableHeadCenter">MIDI over USB (host)   </th><th class="markdownTableHeadCenter">MIDI over BLE    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino UNO R3   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽¹⁾   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Nano   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano 33 IoT   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Nano RP2040   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano ESP32   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Nano 33 BLE   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽⁴⁾   </td><td class="markdownTableBodyCenter">✅    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Nano Every   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽²⁾   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino MKR 1000   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino MKR 1010 WiFi   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino UNO R4 Minima   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽³⁾   </td><td class="markdownTableBodyCenter">&emsp;❌⁽⁴⁾   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino UNO R4 WiFi   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽³⁾   </td><td class="markdownTableBodyCenter">&emsp;❌⁽⁴⁾   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Leonardo   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Micro   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Zero   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino Mega 2560   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">&emsp;❌⁽¹⁾   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Arduino Due   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Arduino GIGA R1 WiFi   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">&emsp;❌⁽⁴⁾   </td><td class="markdownTableBodyCenter">🔼    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Teensy 2.0, Teensy++ 2.0   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Teensy LC, 3.0, 3.1, 3.2, 3.5, 4.0   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Teensy 3.6, 4.1   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Raspberry Pi Pico (RP2040)   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Raspberry Pi Pico W (RP2040)   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">✅    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ESP8266   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ESP32   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">✅    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ESP32-S2   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">🔼   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">❌    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ESP32-S3   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❓   </td><td class="markdownTableBodyCenter">✅    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ESP32-C3, ESP32-C6, ESP32-H2   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">🔼   </td></tr>
</table>
<p><small>(1) Secondary microcontroller can be flashed with custom MIDI firmware.</small> <br  />
 <small>(2) Secondary microcontroller could <em>in theory</em> be flashed with custom MIDI firmware.</small> <br  />
 <small>(3) Hardware supports it, but the Arduino core explicitly disables MIDI over USB support by setting <code>CFG_TUD_MIDI=0</code> in <a href="https://github.com/arduino/ArduinoCore-renesas/blob/6ee152ff2a9c00c8ab2ccff4f1eaee7e1f3388c1/variants/MINIMA/tusb_config.h#L81">their TinyUSB config</a>.</small> <br  />
 <small>(4) Hardware supports it, but the Arduino core does not support it.</small> <br  />
</p>
<p>See the <a class="el" href="../../db/d99/md_pages_MIDI-over-BLE.html">MIDI over BLE</a> page for more information about Bluetooth Low Energy support.</p>
<h1><a class="anchor" id="arduino-boards-with-native-usb-support"></a>
Arduino boards with native USB support</h1>
<p><em>Arduino Due, Arduino Leonardo, Arduino Micro, Arduino Nano 33 IOT, Arduino Zero, Arduino MKR Zero, Arduino MKR1000 ...</em> <br  />
 </p><hr  />
<p> Some of the newer boards have native USB support (i.e. the USB connection goes directly to the main <a class="el" href="../../d7/dc7/namespaceMCU.html">MCU</a>) this means that they can act as a true USB MIDI device. This is based on PluggableUSB, using the <a href="https://github.com/arduino-libraries/MIDIUSB">MIDIUSB</a> library. <br  />
 You just have to <a class="el" href="../../d8/da8/md_pages_Installation.html">install the MIDIUSB library</a>, and upload a Control Surface sketch with a <a class="el" href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a>. <br  />
 The computer will then automatically detect the Arduino as a MIDI device.</p>
<p>The MIDIUSB library only supports one MIDI USB virtual cable, while most Teensies support all 16 cables (see below).</p>
<h1><a class="anchor" id="mbed-os-boards-with-native-usb-support"></a>
Mbed OS boards with native USB support</h1>
<p><em>Arduino Nano 33 BLE, Raspberry Pi Pico</em> </p><hr  />
<p> While these boards are not supported by the Arduino MIDIUSB library, they still support MIDI over USB through Control Surface's custom <code><a class="el" href="../../d1/dd4/classPluggableUSBMIDI.html">PluggableUSBMIDI</a></code> implementation, which is built on top of <a href="https://github.com/arduino/ArduinoCore-mbed">arduino/ArduinoCore-mbed</a>'s <code>PluggableUSB</code> system.</p>
<p>You can also use the <a href="https://github.com/earlephilhower/arduino-pico">earlephilhower/arduino-pico</a> core instead of the official one from Arduino, in which case you have to enable the Adafruit TinyUSB library in the <code>Tools &gt; USB Stack</code> menu.</p>
<p>Known issues:</p><ul>
<li><a href="https://github.com/arduino/ArduinoCore-mbed/issues/129">ArduinoCore-mbed/issues#129</a>: Nano 33 BLE unreliable USB communication</li>
<li><a href="https://github.com/adafruit/Adafruit_TinyUSB_Arduino/issues/238">adafruit/Adafruit_TinyUSB_Arduino#238</a>: TinyUSB MIDI crashes when simultaneously receiving and sending messages</li>
</ul>
<h1><a class="anchor" id="teensy"></a>
Teensy</h1>
<p><em>Teensy 2.0, Teensy++ 2.0, Teensy LC, Teensy 3.0, Teensy 3.1, Teensy 3.2, Teensy 3.5, Teensy 3.6, Teensy 4.0, Teensy 4.1</em> <br  />
 </p><hr  />
<p> Teensy boards have native USB support as well. You don't even need to install anything, because MIDI over USB is implemented in the Teensy Core. <br  />
 You just need to select the &lsquo;'MIDI&rsquo;` USB type from <code>Tools</code> &gt; <code>USB Type</code>. Other USB types that include MIDI can be used as well.</p>
<p>You can use up to 16 USB MIDI virtual cables over a single USB connection, they will show up as 16 different MIDI devices on your computer. (On a Teensy 2, this number is limited to 4 USB MIDI cables).</p>
<h1><a class="anchor" id="arduino-boards-with-an-atmega16u2-atmega8u2"></a>
Arduino boards with an ATmega16U2 (ATmega8U2)</h1>
<p><em>Arduino Uno, Arduino Mega</em> </p><hr  />
<p> Some Arduino's that don't have native USB support can still be used as a USB MIDI device. <br  />
 This is because they have a second, smaller microcontroller on board, an ATmega16U2 (ATmega8U2 on older boards). This small USB-capable <a class="el" href="../../d7/dc7/namespaceMCU.html">MCU</a> communicates with the main <a class="el" href="../../d7/dc7/namespaceMCU.html">MCU</a> over TTL UART (serial, TX and RX on pins 0 and 1), and also acts as a USB COM port, to communicate with the computer (for programming and for using the Serial Monitor). During normal operation, the ATmega16U2 is just a USB-to-Serial bridge, but you can also program it to be a USB MIDI-to-Serial bridge. <br  />
</p>
<p>You can use the <a href="https://github.com/ddiakopoulos/hiduino">HIDUINO</a> firmware by <a href="http://www.dimitridiakopoulos.com/hiduino">Dimitri Diakopoulos</a>. This flashing process is called a Device Firmware Upgrade (DFU). On Windows, you can use the Atmel Flip tool, on Linux or Mac, you can use <code>dfu-programmer</code>. Everything is explained <a href="https://github.com/tttapa/MIDI_controller#arduino-uno-or-mega">here</a>. <br  />
 Because you need the ATmega16U2 for uploading new programs to the Arduino, you have to upload your program first, and then flash the MIDI firmware. If you want to change your program, you have to flash the default Serial firmware again, then upload your new program, and finally flash the MIDI firmware. <br  />
 That's quite a cumbersome process, especially if you're just trying different settings, tweaking some values or trying to debug your code. <br  />
</p>
<h3>Debug mode</h3>
<p>To make this process a little easier, the MIDI Controller library has a debug MIDI interface, that prints the MIDI events to the serial monitor (or other Stream outputs). This means that you don't need the MIDI firmware to see if it's sending the right MIDI messages. <br  />
 You can enable the debug mode by instantiating one of the following <code>*DebugMIDI_Interfaces</code>: <br  />
</p><ul>
<li><a class="el" href="../../de/d2d/classUSBDebugMIDI__Interface.html">USBDebugMIDI_Interface</a></li>
<li><a class="el" href="../../d8/d0b/classStreamDebugMIDI__Interface.html">StreamDebugMIDI_Interface</a></li>
<li><a class="el" href="../../db/dc4/classSerialDebugMIDI__Interface.html">SerialDebugMIDI_Interface</a></li>
<li><a class="el" href="../../d8/d29/classHardwareSerialDebugMIDI__Interface.html">HardwareSerialDebugMIDI_Interface</a></li>
<li><a class="el" href="../../d3/d54/classSoftwareSerialDebugMIDI__Interface.html">SoftwareSerialDebugMIDI_Interface</a></li>
</ul>
<h3>Hairless MIDI</h3>
<p>Once that's working, you can try it out with real MIDI messages, by using a software tool called <a href="http://projectgus.github.io/hairless-midiserial/">Hairless MIDI&lt;-&gt;Serial bridge</a>. This application takes MIDI messages from the serial port, and sends them to a virtual MIDI port on your computer, so you can access it in your DAW or DJ program. <br  />
 To use it in the Control Surface library, instantiate a <code><a class="el" href="../../dc/dff/classHairlessMIDI__Interface.html" title="A class for MIDI Interfaces sending and receiving data over the USB Serial CDC connection for the use...">HairlessMIDI_Interface</a></code> at the top of your sketch instead of the <code>*DebugMIDI_Interface</code>. <br  />
</p>
<h3>HIDUINO MIDI over USB</h3>
<p>Finally, when you know that everything is working the way you want it, you can change the baud rate to the official MIDI baud rate of 31250, by using the <code><a class="el" href="../../de/d05/classUSBMIDI__Interface.html" title="A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.">USBMIDI_Interface</a></code>, uploading the sketch, and flashing the HIDUINO MIDI firmware using Flip or dfu-programmer. <br  />
 You can now just plug it into your computer, and it will be recognized as a MIDI device, you don't need to run Hairless anymore. <br  />
</p>
<h3>USBMidiKliK</h3>
<p>The HIDUINO firmware is rather old, and there's a newer alternative that combines the MIDI USB and Serial USB modes in a single firmware: <a href="https://github.com/TheKikGen/USBMidiKliK">USBMidiKliK</a>. This means that you should be able to program the Arduino and use MIDI over USB without swapping firmwares all the time. <br  />
 I haven't tried this myself, but it looks promising.</p>
<h1><a class="anchor" id="arduino-boards-with-a-samd11"></a>
Arduino boards with a SAMD11</h1>
<p><em>Arduino Nano Every</em> </p><hr  />
<p> Some newer boards use a SAMD11 as the USB-to-TTL chip. In theory, you could also upload custom firmware to this chip, but I've never seen anyone do it. This <a href="https://forum.arduino.cc/index.php?topic=677150.msg4562019#msg4562019">forum thread</a> contains some useful information. <br  />
</p>
<p>Once you have working SAMD11 MIDI over USB firmware, the usage is the same as the previous section about the ATmega16U2. <br  />
 I wouldn't recommend this approach.</p>
<h1><a class="anchor" id="newer-not-yet-supported-arduino-boards"></a>
Newer, not yet supported Arduino boards</h1>
<p><em>Arduino UNO R4</em> </p><hr  />
<p> MIDI over USB is not yet supported on these boards, although the hardware may support it. Apart from MIDI over USB, the Control Surface library works as expected. Other features (like MIDI over Serial) are supported.</p>
<h1><a class="anchor" id="boards-with-a-single-purpose-usb-to-ttl-chip"></a>
Boards with a single-purpose USB-to-TTL chip</h1>
<p><em>Arduino Nano, Arduino Duemilanove, Chinese Uno &amp; Mega clones ...</em> </p><hr  />
<p> Whereas the ATmega16U2 chip is programmable, most other USB-to-TTL chips are single-purpose, so you can't flash them with the HIDUINO MIDI firmware. <br  />
 These chips include FTDI chips (Nano and Duemilanove) and the CH340G or CP2102 (both popular on Chinese "Arduino" clones). <br  />
 While MIDI over USB is not supported on these boards, you can still use Hairless. Just instantiate a <code><a class="el" href="../../dc/dff/classHairlessMIDI__Interface.html" title="A class for MIDI Interfaces sending and receiving data over the USB Serial CDC connection for the use...">HairlessMIDI_Interface</a></code> at the top of your sketch. <br  />
</p>
<h1><a class="anchor" id="espressif-esp32-boards-with-usb-support"></a>
Espressif ESP32 boards with USB support</h1>
<p><em>ESP32-S2 and ESP32-S3</em> </p><hr  />
<p> The ESP32-S2 and ESP32-S3 chips have native USB support, and MIDI over USB is supported by Control Surface when using version 3.0.0 or later of the <code>arduino-esp32</code> core. <br  />
 At the time of writing, this version has not yet been officially released, and you may need to add the development release link to the boards manager URLs to install it (see <a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html">https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html</a> for more information).</p>
<p>To enable MIDI over USB support, select the <code>"USB-OTG (TinyUSB)"</code> mode in the <code>Tools</code> &gt; <code>USB Mode</code> menu.</p>
<h1><a class="anchor" id="other-espressif-boards"></a>
Other Espressif boards</h1>
<p><em>ESP8266, ESP32, ESP32-C3, ESP32-C6, ESP32-H2</em> </p><hr  />
<p> These ESP8266 and ESP32 microcontrollers don't have native USB support, and all development boards I've come across use a single-purpose USB-to-TTL chip, which means that they fall into the same category as the Arduino Nano when it comes to MIDI over USB.</p>
<p>That being said, some of these chips have built-in WiFi, so you can use rtpMIDI, using the <a href="https://github.com/lathoub/Arduino-AppleMIDI-Library">AppleMIDI library</a>, for example. <br  />
 This is supported by Control Surface after installing the necessary libraries. See the <a class="el" href="../../dc/d7d/AppleMIDI_8ino-example.html">AppleMIDI.ino</a> example for details.</p>
<p>An alternative is to use Open Sound Control (OSC). This is not MIDI, it's an entirely different protocol, built on top of UDP. It can be used for bidirectional communication between audio software and control surfaces. OSC is not directly supported by the Control Surface library, but they can be integrated relatively easily.</p>
<p>The ESP32 also has Bluetooth support, so you can use MIDI over BLE. This is supported by the Control Surface library using the <a class="el" href="../../df/d43/structBluetoothMIDI__Interface.html">BluetoothMIDI_Interface</a>.</p>
<h1><a class="anchor" id="custom-usb-midi-backends"></a>
Custom USB MIDI backends</h1>
<p>Control Surface allows you to easily define your own USB MIDI backends for boards that are not supported out of the box or for other hardware such as USB host shields. You can find an example in <a class="el" href="../../d7/d5f/Custom-USB-MIDI-Backend_8ino-example.html">Custom-USB-MIDI-Backend.ino</a>.</p>
<hr  />
<h1><a class="anchor" id="conclusion"></a>
Conclusion</h1>
<p>I strongly recommend getting a Teensy 3.x or 4.x for building a Control Surface. MIDI over USB is supported right out of the box, and it's the only platform that currently supports USB audio output. On top of that, it has plenty of memory to create large MIDI Controllers, and drive lots of displays.</p>
<p>Arduino boards using the nRF52840 or SAMD21 also support MIDI over USB natively. They're not as powerful as a Teensy, and the SAMD21 doesn't have that much memory, but they are suitable for medium-sized MIDI projects. <br  />
 This category includes Arduino Nano 33 and Arduino MKR boards.</p>
<p>If you just want a small and cheap MIDI Controller, the Arduino Leonardo/Micro are good choices as well, just keep in mind that they don't have a lot of RAM, and are pretty slow compared to Teensy boards, both in terms of CPU power and IO or analog inputs.</p>
<p>The Arduino Uno, Mega, Nano and Nano Every boards are just not fit for MIDI over USB, and I wouldn't recommend them at all for this application. They can of course still be used if you just want 5-pin DIN MIDI instead of MIDI over USB.</p>
<p>You don't have to worry too much about the number of IO pins a board has, since you can use multiplexers and GPIO expanders, using the ExtendedIO classes of the library. Memory can be a much bigger problem, especially if you add a display. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
