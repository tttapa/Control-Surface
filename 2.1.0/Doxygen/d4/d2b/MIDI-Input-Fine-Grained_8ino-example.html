<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: MIDI-Input-Fine-Grained.ino</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">2.1.0</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MIDI-Input-Fine-Grained.ino</div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="midi-input-fine-grained"></a>
MIDI-Input-Fine-Grained</h1>
<p>This is an example on how to attach your own callbacks for receiving MIDI input. This example has fine-grained callbacks, i.e. one for each message type (Note On, Note Off, Control Change, System Exclusive ...).</p>
<dl class="section user"><dt>Boards: <b class="boards-info" title="Control Surface&apos;s automated continuous integration workflows regularly verify that this example compiles successfully for the following boards. The list is not exhaustive, and the example will most likely work on other boards as well (perhaps requiring slight modifications).">ðŸ›ˆ</b> </dt><dd>AVR, AVR USB, Nano Every, Due, Nano 33 IoT, Nano 33 BLE, UNO R4, Pi Pico, Teensy 3.x, ESP32, ESP8266</dd></dl>
<h2><a class="anchor" id="connections-24"></a>
Connections</h2>
<p>None.</p>
<h2><a class="anchor" id="behavior-24"></a>
Behavior</h2>
<ul>
<li>When MIDI messages are sent to the USB interface, they are printed to the Serial port.</li>
</ul>
<h2><a class="anchor" id="mapping-17"></a>
Mapping</h2>
<p>None.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d5d/MIDI-Input_8ino-example.html">MIDI-Input.ino</a> </dd>
<dd>
<a class="el" href="../../da/d27/MIDI-Input-Fine-Grained-All-Callbacks_8ino-example.html">MIDI-Input-Fine-Grained-All-Callbacks.ino</a> for a list of all callbacks for all message types</dd></dl>
<p>Written by PieterP, 2021-06-26 <br  />
 <a href="https://github.com/tttapa/Control-Surface">https://github.com/tttapa/Control-Surface</a></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span> <span class="comment">// Include the Control Surface library</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The MIDI over USB interface to use</span></div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Custom MIDI callback that prints incoming messages.</span></div>
<div class="line"><span class="keyword">struct </span>MyMIDI_Callbacks : <a id="_a1" name="_a1"></a><a class="code hl_class" href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html">FineGrainedMIDI_Callbacks</a>&lt;MyMIDI_Callbacks&gt; {</div>
<div class="line">  <span class="comment">// Note how this ^ name is identical to the argument used here ^</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Function that is called whenever a MIDI Note Off message is received.</span></div>
<div class="line">  <span class="keywordtype">void</span> <a id="a2" name="a2"></a><a class="code hl_function" href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html#a7387943eaeb17e3083ecba28f5b03f09">onNoteOff</a>(<a id="_a3" name="_a3"></a><a class="code hl_class" href="../../d2/d48/classChannel.html">Channel</a> channel, uint8_t note, uint8_t velocity, <a id="_a4" name="_a4"></a><a class="code hl_class" href="../../d2/d75/classCable.html">Cable</a> cable) {</div>
<div class="line">    Serial &lt;&lt; <span class="stringliteral">&quot;Note Off: &quot;</span> &lt;&lt; channel &lt;&lt; <span class="stringliteral">&quot;, note &quot;</span> &lt;&lt; note &lt;&lt; <span class="stringliteral">&quot;, velocity &quot;</span></div>
<div class="line">           &lt;&lt; velocity &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; cable &lt;&lt; <a class="code hl_function" href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">endl</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Function that is called whenever a MIDI Note On message is received.</span></div>
<div class="line">  <span class="keywordtype">void</span> <a id="a5" name="a5"></a><a class="code hl_function" href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html#aa34fb352809bfaaf6754e11f267dc113">onNoteOn</a>(<a class="code hl_class" href="../../d2/d48/classChannel.html">Channel</a> channel, uint8_t note, uint8_t velocity, <a class="code hl_class" href="../../d2/d75/classCable.html">Cable</a> cable) {</div>
<div class="line">    Serial &lt;&lt; <span class="stringliteral">&quot;Note On: &quot;</span> &lt;&lt; channel &lt;&lt; <span class="stringliteral">&quot;, note &quot;</span> &lt;&lt; note &lt;&lt; <span class="stringliteral">&quot;, velocity &quot;</span></div>
<div class="line">           &lt;&lt; velocity &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; cable &lt;&lt; <a class="code hl_function" href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">endl</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">} callback;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  Serial.begin(115200);        <span class="comment">// For printing the messages</span></div>
<div class="line">  midi.<a id="a6" name="a6"></a><a class="code hl_function" href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a7c3e14d99bd3dc0e3670d6956dafcaf2">begin</a>();                <span class="comment">// Initialize the MIDI interface</span></div>
<div class="line">  midi.<a id="a7" name="a7"></a><a class="code hl_function" href="../../d9/d73/classMIDI__Interface.html#ad38edab932c8860dfe3f907697d09e2b">setCallbacks</a>(callback); <span class="comment">// Attach the custom callback</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  midi.<a id="a8" name="a8"></a><a class="code hl_function" href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a44137bb65de2396875934e48a6ee5099">update</a>(); <span class="comment">// Continuously handle MIDI input</span></div>
<div class="line">}</div>
<div class="ttc" id="aControl__Surface_8h_html"><div class="ttname"><a href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a></div><div class="ttdoc">The main header file that includes all Control-Surface header files.</div></div>
<div class="ttc" id="aclassCable_html"><div class="ttname"><a href="../../d2/d75/classCable.html">Cable</a></div><div class="ttdoc">A type-safe class for MIDI USB Cable numbers.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbc/Cable_8hpp_source.html#l00013">Cable.hpp:13</a></div></div>
<div class="ttc" id="aclassChannel_html"><div class="ttname"><a href="../../d2/d48/classChannel.html">Channel</a></div><div class="ttdoc">A type-safe class for MIDI channels.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d42/Channel_8hpp_source.html#l00013">Channel.hpp:13</a></div></div>
<div class="ttc" id="aclassFineGrainedMIDI__Callbacks_html"><div class="ttname"><a href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html">FineGrainedMIDI_Callbacks</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00034">MIDI_Callbacks.hpp:34</a></div></div>
<div class="ttc" id="aclassFineGrainedMIDI__Callbacks_html_a7387943eaeb17e3083ecba28f5b03f09"><div class="ttname"><a href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html#a7387943eaeb17e3083ecba28f5b03f09">FineGrainedMIDI_Callbacks::onNoteOff</a></div><div class="ttdeci">void onNoteOff(Channel channel, uint8_t note, uint8_t velocity, Cable cable)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00234">MIDI_Callbacks.hpp:234</a></div></div>
<div class="ttc" id="aclassFineGrainedMIDI__Callbacks_html_aa34fb352809bfaaf6754e11f267dc113"><div class="ttname"><a href="../../d3/d0d/classFineGrainedMIDI__Callbacks.html#aa34fb352809bfaaf6754e11f267dc113">FineGrainedMIDI_Callbacks::onNoteOn</a></div><div class="ttdeci">void onNoteOn(Channel channel, uint8_t note, uint8_t velocity, Cable cable)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00235">MIDI_Callbacks.hpp:235</a></div></div>
<div class="ttc" id="aclassGenericUSBMIDI__Interface_html_a44137bb65de2396875934e48a6ee5099"><div class="ttname"><a href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a44137bb65de2396875934e48a6ee5099">GenericUSBMIDI_Interface::update</a></div><div class="ttdeci">void update() override</div><div class="ttdoc">Poll the backend (if necessary) and invoke the callbacks for any received MIDI messages,...</div></div>
<div class="ttc" id="aclassGenericUSBMIDI__Interface_html_a7c3e14d99bd3dc0e3670d6956dafcaf2"><div class="ttname"><a href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a7c3e14d99bd3dc0e3670d6956dafcaf2">GenericUSBMIDI_Interface::begin</a></div><div class="ttdeci">void begin() override</div><div class="ttdoc">Initialize.</div></div>
<div class="ttc" id="aclassMIDI__Interface_html_ad38edab932c8860dfe3f907697d09e2b"><div class="ttname"><a href="../../d9/d73/classMIDI__Interface.html#ad38edab932c8860dfe3f907697d09e2b">MIDI_Interface::setCallbacks</a></div><div class="ttdeci">void setCallbacks(MIDI_Callbacks *cb)</div><div class="ttdoc">Set the callbacks that will be called when a MIDI message is received.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d04/MIDI__Interface_8hpp_source.html#l00058">MIDI_Interface.hpp:58</a></div></div>
<div class="ttc" id="aclassUSBMIDI__Interface_html"><div class="ttname"><a href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d64/USBMIDI__Interface_8hpp_source.html#l00164">USBMIDI_Interface.hpp:165</a></div></div>
<div class="ttc" id="agroup__AH__PrintStream_html_ga439f453f806df7d97e736ff0e7151344"><div class="ttname"><a href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">AH::endl</a></div><div class="ttdeci">Print &amp; endl(Print &amp;printer)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d69/PrintStream_8cpp_source.html#l00028">PrintStream.cpp:28</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
