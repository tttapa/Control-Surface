<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: Dual-MIDI-Interface.ino</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">pin-t-adl</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Dual-MIDI-Interface.ino</div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="dual-midi-interface"></a>
Dual-MIDI-Interface</h1>
<p>This example demonstrates how to group together two or more MIDI interfaces, so you can send the MIDI output over both MIDI USB and 5-pin DIN MIDI, for example. MIDI input is received from all interfaces as well.</p>
<p>The <a class="el" href="../../d3/df7/midi-tutorial.html">MIDI Tutorial</a> has an entire section dedicated to MIDI routing: <a class="el" href="../../d3/df7/midi-tutorial.html#midi_md-routing">Routing MIDI messages</a>. Also have a look at the <a class="el" href="../../d0/dc4/MIDI_Pipes-Routing_8ino-example.html">MIDI_Pipes-Routing.ino</a> example, the <a class="el" href="../../df/ddc/group__MIDI__Routing.html">MIDI Routing</a> module and the <a class="el" href="../../df/d72/classMIDI__Pipe.html">MIDI_Pipe</a> documentation for more information about MIDI routing. <br  />
 Control Surface can be used as both a MIDI sink and a MIDI source.</p>
<p>When you call <code>Control_Surface.begin()</code>, it automatically connects itself to the default MIDI interface (<a class="el" href="../../d9/d73/classMIDI__Interface.html#aea39e2d359376a21ff1a490b2e0b5f22">MIDI_Interface::getDefault()</a>). <br  />
 If you want to route everything manually, you have to connect it before calling <code>Control_Surface.begin()</code>, or you have to disconnect the default pipes before connecting your own, using <a class="el" href="../../dc/d45/classControl__Surface__.html#a1c2b4dbd39e9279eef247ad25f7109dd">Control_Surface_::disconnectMIDI_Interfaces()</a>.</p>
<dl class="section user"><dt>Boards: <b class="boards-info" title="Control Surface&apos;s automated continuous integration workflows regularly verify that this example compiles successfully for the following boards. The list is not exhaustive, and the example will most likely work on other boards as well (perhaps requiring slight modifications).">ðŸ›ˆ</b> </dt><dd>AVR USB, Nano Every, Due, Teensy 3.x</dd></dl>
<h2><a class="anchor" id="connections-43"></a>
Connections</h2>
<ul>
<li>A0: wiper of a potentiometer</li>
</ul>
<p>Connect the left terminal of the potentiometer to ground, and the right one to V<sub>CC</sub>.</p>
<h2><a class="anchor" id="behavior-47"></a>
Behavior</h2>
<ul>
<li>When you turn the potentiometer, you should receive MIDI Control Change events on both the Serial MIDI interface and the USB MIDI interface.</li>
<li>When a MIDI Note event for middle C is received on either MIDI interface, the state of the built-in LED will change accordingly.</li>
</ul>
<h2><a class="anchor" id="mapping-23"></a>
Mapping</h2>
<ul>
<li>None</li>
</ul>
<p>Written by PieterP, 2019-08-22 <br  />
 <a href="https://github.com/tttapa/Control-Surface">https://github.com/tttapa/Control-Surface</a></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create two MIDI interfaces</span></div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> usbmidi;</div>
<div class="line"><a id="_a1" name="_a1"></a><a class="code hl_class" href="../../d9/d78/classHardwareSerialMIDI__Interface.html">HardwareSerialMIDI_Interface</a> serialmidi {Serial1, <a id="a2" name="a2"></a><a class="code hl_variable" href="../../d6/d04/MIDI__Interface_8hpp.html#a96266024e624236301a52383246fa42f">MIDI_BAUD</a>};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a MIDI pipe factory to connect the MIDI interfaces to Control Surface</span></div>
<div class="line"><a id="_a3" name="_a3"></a><a class="code hl_struct" href="../../d3/da5/structMIDI__PipeFactory.html">BidirectionalMIDI_PipeFactory&lt;2&gt;</a> pipes;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add some MIDI elements to show that the MIDI interfaces actually work</span></div>
<div class="line"><a id="_a4" name="_a4"></a><a class="code hl_class" href="../../db/d32/classCCPotentiometer.html">CCPotentiometer</a> pot {A0, <a id="a5" name="a5"></a><a class="code hl_variable" href="../../d4/dbe/namespaceMIDI__CC.html#a6eb9900d522be13f07efce201817046d">MIDI_CC::General_Purpose_Controller_1</a>};</div>
<div class="line"><a id="_a6" name="_a6"></a><a class="code hl_class" href="../../d9/d55/classNoteCCKPLED.html">NoteLED</a> led {LED_BUILTIN, 0x3C};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Manually connect the MIDI interfaces to Control Surface</span></div>
<div class="line">  <a id="a7" name="a7"></a><a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a> | pipes | usbmidi;</div>
<div class="line">  <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a> | pipes | serialmidi;</div>
<div class="line">  <span class="comment">// Initialize Control Surface _after_ connecting the interfaces</span></div>
<div class="line">  <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a8" name="a8"></a><a class="code hl_function" href="../../dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">begin</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <a class="code hl_variable" href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a>.<a id="a9" name="a9"></a><a class="code hl_function" href="../../dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">loop</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The vertical pipe operator (|) is used to make a bidirectional connection </span></div>
<div class="line"><span class="comment"> * between a MIDI sink or source and a MIDI pipe.</span></div>
<div class="line"><span class="comment"> * You can also use unidirectional pipes. These can be connected using the </span></div>
<div class="line"><span class="comment"> * stream operators (&lt;&lt; and &gt;&gt;).</span></div>
<div class="line"><span class="comment"> * </span></div>
<div class="line"><span class="comment"> * For example:</span></div>
<div class="line"><span class="comment"> * </span></div>
<div class="line"><span class="comment"> *     MIDI_PipeFactory&lt;2&gt; pipes;</span></div>
<div class="line"><span class="comment"> *     ...</span></div>
<div class="line"><span class="comment"> *       Control_Surface &gt;&gt; pipes &gt;&gt; usbmidi;    // Output to usbmidi</span></div>
<div class="line"><span class="comment"> *       Control_Surface &lt;&lt; pipes &lt;&lt; serialmidi; // Input from serialmidi</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="ttc" id="aControl__Surface_8h_html"><div class="ttname"><a href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a></div><div class="ttdoc">The main header file that includes all Control-Surface header files.</div></div>
<div class="ttc" id="aControl__Surface__Class_8cpp_html_af7a5d250297d82b2b29605dd7ac250df"><div class="ttname"><a href="../../d9/d38/Control__Surface__Class_8cpp.html#af7a5d250297d82b2b29605dd7ac250df">Control_Surface</a></div><div class="ttdeci">Control_Surface_ &amp; Control_Surface</div><div class="ttdoc">A predefined instance of the Control Surface to use in the Arduino sketches.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00338">Control_Surface_Class.cpp:338</a></div></div>
<div class="ttc" id="aMIDI__Interface_8hpp_html_a96266024e624236301a52383246fa42f"><div class="ttname"><a href="../../d6/d04/MIDI__Interface_8hpp.html#a96266024e624236301a52383246fa42f">MIDI_BAUD</a></div><div class="ttdeci">constexpr auto MIDI_BAUD</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d04/MIDI__Interface_8hpp_source.html#l00013">MIDI_Interface.hpp:13</a></div></div>
<div class="ttc" id="aclassCCPotentiometer_html"><div class="ttname"><a href="../../db/d32/classCCPotentiometer.html">CCPotentiometer</a></div><div class="ttdoc">A class of MIDIOutputElements that read the analog input from a potentiometer or fader,...</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df0/CCPotentiometer_8hpp_source.html#l00019">CCPotentiometer.hpp:19</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_ab0bdf5cca484fb2ba637c39384b27fb2"><div class="ttname"><a href="../../dc/d45/classControl__Surface__.html#ab0bdf5cca484fb2ba637c39384b27fb2">Control_Surface_::begin</a></div><div class="ttdeci">void begin()</div><div class="ttdoc">Initialize the Control_Surface.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00022">Control_Surface_Class.cpp:22</a></div></div>
<div class="ttc" id="aclassControl__Surface___html_afe461d27b9c48d5921c00d521181f12f"><div class="ttname"><a href="../../dc/d45/classControl__Surface__.html#afe461d27b9c48d5921c00d521181f12f">Control_Surface_::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">Update all MIDI elements, send MIDI events and read MIDI input.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d38/Control__Surface__Class_8cpp_source.html#l00071">Control_Surface_Class.cpp:71</a></div></div>
<div class="ttc" id="aclassHardwareSerialMIDI__Interface_html"><div class="ttname"><a href="../../d9/d78/classHardwareSerialMIDI__Interface.html">HardwareSerialMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending and receiving MIDI messages over a Hardware Serial port.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d23/SerialMIDI__Interface_8hpp_source.html#l00106">SerialMIDI_Interface.hpp:107</a></div></div>
<div class="ttc" id="aclassNoteCCKPLED_html"><div class="ttname"><a href="../../d9/d55/classNoteCCKPLED.html">NoteCCKPLED</a></div><div class="ttdoc">Generic base class for classes that listen for MIDI Note, Control Change and Key Pressure events on a...</div><div class="ttdef"><b>Definition</b> <a href="../../d2/df7/NoteCCKPLED_8hpp_source.html#l00020">NoteCCKPLED.hpp:20</a></div></div>
<div class="ttc" id="aclassUSBMIDI__Interface_html"><div class="ttname"><a href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d64/USBMIDI__Interface_8hpp_source.html#l00164">USBMIDI_Interface.hpp:165</a></div></div>
<div class="ttc" id="anamespaceMIDI__CC_html_a6eb9900d522be13f07efce201817046d"><div class="ttname"><a href="../../d4/dbe/namespaceMIDI__CC.html#a6eb9900d522be13f07efce201817046d">MIDI_CC::General_Purpose_Controller_1</a></div><div class="ttdeci">constexpr uint8_t General_Purpose_Controller_1</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d43/Control__Change_8hpp_source.html#l00032">Control_Change.hpp:32</a></div></div>
<div class="ttc" id="astructMIDI__PipeFactory_html"><div class="ttname"><a href="../../d3/da5/structMIDI__PipeFactory.html">MIDI_PipeFactory</a></div><div class="ttdoc">Class that produces multiple MIDI_Pipes.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/ddf/MIDI__Pipes_8hpp_source.html#l00659">MIDI_Pipes.hpp:659</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
