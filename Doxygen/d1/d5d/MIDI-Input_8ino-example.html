<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Surface: MIDI-Input.ino</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="../../custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Surface<span id="projectnumber">&#160;<code><a href="/Control-Surface/">main</a></code></span>
   </div>
   <div id="projectbrief">MIDI Control Surface library for Arduino</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MIDI-Input.ino</div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="midi-input"></a>
MIDI-Input</h1>
<p>This is an example on how to attach your own callbacks for receiving MIDI input.</p>
<dl class="section user"><dt>Boards: <b class="boards-info" title="Control Surface&apos;s automated continuous integration workflows regularly verify that this example compiles successfully for the following boards. The list is not exhaustive, and the example will most likely work on other boards as well (perhaps requiring slight modifications).">ðŸ›ˆ</b> </dt><dd>AVR, AVR USB, Nano Every, Due, Nano 33 IoT, Nano 33 BLE, UNO R4, Pi Pico, Teensy 3.x, ESP32, ESP8266</dd></dl>
<h2><a class="anchor" id="connections-44"></a>
Connections</h2>
<p>None.</p>
<h2><a class="anchor" id="behavior-46"></a>
Behavior</h2>
<ul>
<li>When MIDI messages are sent to the USB interface, they are printed to the Serial port.</li>
</ul>
<h2><a class="anchor" id="mapping-19"></a>
Mapping</h2>
<p>None.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/d2b/MIDI-Input-Fine-Grained_8ino-example.html">MIDI-Input-Fine-Grained.ino</a> </dd>
<dd>
<a class="el" href="../../da/d27/MIDI-Input-Fine-Grained-All-Callbacks_8ino-example.html">MIDI-Input-Fine-Grained-All-Callbacks.ino</a></dd></dl>
<p>Written by PieterP, 2020-06-11 <br  />
 <a href="https://github.com/tttapa/Control-Surface">https://github.com/tttapa/Control-Surface</a></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a>&gt;</span> <span class="comment">// Include the Control Surface library</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The MIDI over USB interface to use</span></div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a> midi;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Custom MIDI callback that prints incoming messages.</span></div>
<div class="line"><span class="keyword">struct </span><a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">MyMIDI_Callbacks</a> : <a id="_a1" name="_a1"></a><a class="code hl_class" href="../../de/d55/classMIDI__Callbacks.html">MIDI_Callbacks</a> {</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Callback for channel messages (notes, control change, pitch bend, etc.).</span></div>
<div class="line">  <span class="keywordtype">void</span> <a id="a2" name="a2"></a><a class="code hl_function" href="../../de/d55/classMIDI__Callbacks.html#a15816a727c9ac6ca0893e3ca24637d9a">onChannelMessage</a>(<a id="_a3" name="_a3"></a><a class="code hl_class" href="../../d9/d73/classMIDI__Interface.html">MIDI_Interface</a> &amp;, <a id="_a4" name="_a4"></a><a class="code hl_struct" href="../../d7/d3f/structChannelMessage.html">ChannelMessage</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">cm</a>)<span class="keyword"> override </span>{</div>
<div class="line">    <span class="comment">// Print the message</span></div>
<div class="line">    <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">Serial</a> &lt;&lt; F(<span class="stringliteral">&quot;Channel message: &quot;</span>)                                        <span class="comment">//</span></div>
<div class="line">           &lt;&lt; hex &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">cm</a>.header &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">cm</a>.data1 &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">cm</a>.data2 &lt;&lt; dec <span class="comment">//</span></div>
<div class="line">           &lt;&lt; F(<span class="stringliteral">&quot; on cable &quot;</span>) &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">cm</a>.cable.getOneBased() &lt;&lt; <a class="code hl_function" href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">endl</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Callback for system exclusive messages</span></div>
<div class="line">  <span class="keywordtype">void</span> <a id="a5" name="a5"></a><a class="code hl_function" href="../../de/d55/classMIDI__Callbacks.html#a3b2170d5d5b002d2c3c4e7b08e2ba29c">onSysExMessage</a>(<a class="code hl_class" href="../../d9/d73/classMIDI__Interface.html">MIDI_Interface</a> &amp;, <a id="_a6" name="_a6"></a><a class="code hl_struct" href="../../db/d45/structSysExMessage.html">SysExMessage</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">se</a>)<span class="keyword"> override </span>{</div>
<div class="line">    <span class="comment">// Print the message</span></div>
<div class="line">    <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">Serial</a> &lt;&lt; F(<span class="stringliteral">&quot;System Exclusive message: [&quot;</span>) &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">se</a>.length &lt;&lt; <span class="stringliteral">&quot;] &quot;</span> <span class="comment">//</span></div>
<div class="line">           &lt;&lt; <a id="_a7" name="_a7"></a><a class="code hl_struct" href="../../d2/d57/structAH_1_1HexDump.html">AH::HexDump</a>(<a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">se</a>.data, <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">se</a>.length)                       <span class="comment">//</span></div>
<div class="line">           &lt;&lt; F(<span class="stringliteral">&quot; on cable &quot;</span>) &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">se</a>.cable.getOneBased() &lt;&lt; <a class="code hl_function" href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">endl</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Callback for real-time messages</span></div>
<div class="line">  <span class="keywordtype">void</span> <a id="a8" name="a8"></a><a class="code hl_function" href="../../de/d55/classMIDI__Callbacks.html#a7b450f6687bee447b80b3035512b2831">onRealTimeMessage</a>(<a class="code hl_class" href="../../d9/d73/classMIDI__Interface.html">MIDI_Interface</a> &amp;, <a id="_a9" name="_a9"></a><a class="code hl_struct" href="../../d6/d99/structRealTimeMessage.html">RealTimeMessage</a> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">rt</a>)<span class="keyword"> override </span>{</div>
<div class="line">    <span class="comment">// Print the message</span></div>
<div class="line">    <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">Serial</a> &lt;&lt; F(<span class="stringliteral">&quot;Real-time message: &quot;</span>) <span class="comment">//</span></div>
<div class="line">           &lt;&lt; hex &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">rt</a>.message &lt;&lt; dec <span class="comment">//</span></div>
<div class="line">           &lt;&lt; F(<span class="stringliteral">&quot; on cable &quot;</span>) &lt;&lt; <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">rt</a>.cable.getOneBased() &lt;&lt; <a class="code hl_function" href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">endl</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">} callback;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">setup</a>() {</div>
<div class="line">  <a class="code hl_function" href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">Serial</a>.begin(115200);        <span class="comment">// For printing the messages</span></div>
<div class="line">  midi.<a id="a10" name="a10"></a><a class="code hl_function" href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a7c3e14d99bd3dc0e3670d6956dafcaf2">begin</a>();                <span class="comment">// Initialize the MIDI interface</span></div>
<div class="line">  midi.<a id="a11" name="a11"></a><a class="code hl_function" href="../../d9/d73/classMIDI__Interface.html#ad38edab932c8860dfe3f907697d09e2b">setCallbacks</a>(callback); <span class="comment">// Attach the custom callback</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  midi.<a id="a12" name="a12"></a><a class="code hl_function" href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a44137bb65de2396875934e48a6ee5099">update</a>(); <span class="comment">// Continuously handle MIDI input</span></div>
<div class="line">}</div>
<div class="ttc" id="aControl__Surface_8h_html"><div class="ttname"><a href="../../db/dbf/Control__Surface_8h.html">Control_Surface.h</a></div><div class="ttdoc">The main header file that includes all Control-Surface header files.</div></div>
<div class="ttc" id="aclassGenericUSBMIDI__Interface_html_a44137bb65de2396875934e48a6ee5099"><div class="ttname"><a href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a44137bb65de2396875934e48a6ee5099">GenericUSBMIDI_Interface::update</a></div><div class="ttdeci">void update() override</div><div class="ttdoc">Poll the backend (if necessary) and invoke the callbacks for any received MIDI messages,...</div></div>
<div class="ttc" id="aclassGenericUSBMIDI__Interface_html_a7c3e14d99bd3dc0e3670d6956dafcaf2"><div class="ttname"><a href="../../dd/d0e/classGenericUSBMIDI__Interface.html#a7c3e14d99bd3dc0e3670d6956dafcaf2">GenericUSBMIDI_Interface::begin</a></div><div class="ttdeci">void begin() override</div><div class="ttdoc">Initialize.</div></div>
<div class="ttc" id="aclassMIDI__Callbacks_html"><div class="ttname"><a href="../../de/d55/classMIDI__Callbacks.html">MIDI_Callbacks</a></div><div class="ttdoc">A class for callbacks from MIDI input.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00015">MIDI_Callbacks.hpp:15</a></div></div>
<div class="ttc" id="aclassMIDI__Callbacks_html_a15816a727c9ac6ca0893e3ca24637d9a"><div class="ttname"><a href="../../de/d55/classMIDI__Callbacks.html#a15816a727c9ac6ca0893e3ca24637d9a">MIDI_Callbacks::onChannelMessage</a></div><div class="ttdeci">virtual void onChannelMessage(MIDI_Interface &amp;, ChannelMessage)</div><div class="ttdoc">Callback for incoming MIDI Channel Messages (notes, control change, pitch bend, etc....</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00019">MIDI_Callbacks.hpp:19</a></div></div>
<div class="ttc" id="aclassMIDI__Callbacks_html_a3b2170d5d5b002d2c3c4e7b08e2ba29c"><div class="ttname"><a href="../../de/d55/classMIDI__Callbacks.html#a3b2170d5d5b002d2c3c4e7b08e2ba29c">MIDI_Callbacks::onSysExMessage</a></div><div class="ttdeci">virtual void onSysExMessage(MIDI_Interface &amp;, SysExMessage)</div><div class="ttdoc">Callback for incoming MIDI System Exclusive Messages.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00021">MIDI_Callbacks.hpp:21</a></div></div>
<div class="ttc" id="aclassMIDI__Callbacks_html_a7b450f6687bee447b80b3035512b2831"><div class="ttname"><a href="../../de/d55/classMIDI__Callbacks.html#a7b450f6687bee447b80b3035512b2831">MIDI_Callbacks::onRealTimeMessage</a></div><div class="ttdeci">virtual void onRealTimeMessage(MIDI_Interface &amp;, RealTimeMessage)</div><div class="ttdoc">Callback for incoming MIDI Real-Time Messages.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dde/MIDI__Callbacks_8hpp_source.html#l00025">MIDI_Callbacks.hpp:25</a></div></div>
<div class="ttc" id="aclassMIDI__Interface_html"><div class="ttname"><a href="../../d9/d73/classMIDI__Interface.html">MIDI_Interface</a></div><div class="ttdoc">An abstract class for MIDI interfaces.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d04/MIDI__Interface_8hpp_source.html#l00020">MIDI_Interface.hpp:23</a></div></div>
<div class="ttc" id="aclassMIDI__Interface_html_ad38edab932c8860dfe3f907697d09e2b"><div class="ttname"><a href="../../d9/d73/classMIDI__Interface.html#ad38edab932c8860dfe3f907697d09e2b">MIDI_Interface::setCallbacks</a></div><div class="ttdeci">void setCallbacks(MIDI_Callbacks *cb)</div><div class="ttdoc">Set the callbacks that will be called when a MIDI message is received.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d04/MIDI__Interface_8hpp_source.html#l00058">MIDI_Interface.hpp:58</a></div></div>
<div class="ttc" id="aclassUSBMIDI__Interface_html"><div class="ttname"><a href="../../de/d05/classUSBMIDI__Interface.html">USBMIDI_Interface</a></div><div class="ttdoc">A class for MIDI interfaces sending MIDI messages over a USB MIDI connection.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d64/USBMIDI__Interface_8hpp_source.html#l00164">USBMIDI_Interface.hpp:165</a></div></div>
<div class="ttc" id="agroup__AH__Containers_html_ga6ee13d5c260727ac6a7de2ee21cc76f9"><div class="ttname"><a href="../../da/de8/group__AH__Containers.html#ga6ee13d5c260727ac6a7de2ee21cc76f9">AH::copyAs</a></div><div class="ttdeci">Array&lt; T, N &gt; copyAs(const Array&lt; U, N &gt; &amp;src)</div><div class="ttdoc">Copy an Array to an Array of a different type.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db6/ArrayHelpers_8hpp_source.html#l00105">ArrayHelpers.hpp:105</a></div></div>
<div class="ttc" id="agroup__AH__PrintStream_html_ga439f453f806df7d97e736ff0e7151344"><div class="ttname"><a href="../../d8/d4b/group__AH__PrintStream.html#ga439f453f806df7d97e736ff0e7151344">AH::endl</a></div><div class="ttdeci">Print &amp; endl(Print &amp;printer)</div><div class="ttdef"><b>Definition</b> <a href="../../da/d69/PrintStream_8cpp_source.html#l00028">PrintStream.cpp:28</a></div></div>
<div class="ttc" id="astructAH_1_1HexDump_html"><div class="ttname"><a href="../../d2/d57/structAH_1_1HexDump.html">AH::HexDump</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d80/PrintStream_8hpp_source.html#l00070">PrintStream.hpp:70</a></div></div>
<div class="ttc" id="astructChannelMessage_html"><div class="ttname"><a href="../../d7/d3f/structChannelMessage.html">ChannelMessage</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d40/MIDI__MessageTypes_8hpp_source.html#l00205">MIDI_MessageTypes.hpp:205</a></div></div>
<div class="ttc" id="astructRealTimeMessage_html"><div class="ttname"><a href="../../d6/d99/structRealTimeMessage.html">RealTimeMessage</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d40/MIDI__MessageTypes_8hpp_source.html#l00354">MIDI_MessageTypes.hpp:354</a></div></div>
<div class="ttc" id="astructSysExMessage_html"><div class="ttname"><a href="../../db/d45/structSysExMessage.html">SysExMessage</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d40/MIDI__MessageTypes_8hpp_source.html#l00305">MIDI_MessageTypes.hpp:305</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
